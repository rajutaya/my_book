<!DOCTYPE html>

<html>
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type">

<title>module LandingHelper - Rails Application Documentation</title>

<link type="text/css" media="screen" href="./rdoc.css" rel="stylesheet">

<script type="text/javascript">
  var rdoc_rel_prefix = "./";
</script>

<script type="text/javascript" charset="utf-8" src="./js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="./js/navigation.js"></script>
<script type="text/javascript" charset="utf-8" src="./js/search_index.js"></script>
<script type="text/javascript" charset="utf-8" src="./js/search.js"></script>
<script type="text/javascript" charset="utf-8" src="./js/searcher.js"></script>
<script type="text/javascript" charset="utf-8" src="./js/darkfish.js"></script>


<body id="top" class="module">
<nav id="metadata">
  <nav id="home-section" class="section">
  <h3 class="section-header">
    <a href="./index.html">Home</a>
    <a href="./table_of_contents.html#classes">Classes</a>
    <a href="./table_of_contents.html#methods">Methods</a>
  </h3>
</nav>


  <nav id="search-section" class="section project-section" class="initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <h3 class="section-header">
      <input type="text" name="search" placeholder="Search" id="search-field"
             title="Type to search, Up and Down to navigate, Enter to load">
    </h3>
  </form>

  <ul id="search-results" class="initially-hidden"></ul>
</nav>


  <div id="file-metadata">
    <nav id="file-list-section" class="section">
  <h3 class="section-header">Defined In</h3>
  <ul>
    <li>app/helpers/landing_helper.rb
  </ul>
</nav>

    
  </div>

  <div id="class-metadata">
    
    
    
    <!-- Method Quickref -->
<nav id="method-list-section" class="section">
  <h3 class="section-header">Methods</h3>

  <ul class="link-list">
    
    <li><a href="#method-i-activity_schedule">#activity_schedule</a>
    
    <li><a href="#method-i-admin_user_lst">#admin_user_lst</a>
    
    <li><a href="#method-i-age_range_cal">#age_range_cal</a>
    
    <li><a href="#method-i-any_time_activity">#any_time_activity</a>
    
    <li><a href="#method-i-curator_added">#curator_added</a>
    
    <li><a href="#method-i-curator_added_withdate">#curator_added_withdate</a>
    
    <li><a href="#method-i-facebook_parent">#facebook_parent</a>
    
    <li><a href="#method-i-facebook_parent_withdate">#facebook_parent_withdate</a>
    
    <li><a href="#method-i-facebook_provider">#facebook_provider</a>
    
    <li><a href="#method-i-find_activity">#find_activity</a>
    
    <li><a href="#method-i-fndPrevPage">#fndPrevPage</a>
    
    <li><a href="#method-i-get_activity">#get_activity</a>
    
    <li><a href="#method-i-get_activity_provider">#get_activity_provider</a>
    
    <li><a href="#method-i-get_balance">#get_balance</a>
    
    <li><a href="#method-i-get_embed_data">#get_embed_data</a>
    
    <li><a href="#method-i-get_purchase_status">#get_purchase_status</a>
    
    <li><a href="#method-i-get_total_feature_list_a">#get_total_feature_list_a</a>
    
    <li><a href="#method-i-get_upcoming_activities">#get_upcoming_activities</a>
    
    <li><a href="#method-i-getusername">#getusername</a>
    
    <li><a href="#method-i-landing_feature_activity">#landing_feature_activity</a>
    
    <li><a href="#method-i-market_and_sell_users">#market_and_sell_users</a>
    
    <li><a href="#method-i-market_and_sell_users_withdate">#market_and_sell_users_withdate</a>
    
    <li><a href="#method-i-marketsell_and_manage_users">#marketsell_and_manage_users</a>
    
    <li><a href="#method-i-marketsell_and_manage_users_withdate">#marketsell_and_manage_users_withdate</a>
    
    <li><a href="#method-i-marketsell_manageplus_users">#marketsell_manageplus_users</a>
    
    <li><a href="#method-i-marketsell_manageplus_users_withdate">#marketsell_manageplus_users_withdate</a>
    
    <li><a href="#method-i-parent_active_usr">#parent_active_usr</a>
    
    <li><a href="#method-i-parent_active_usr_withdate">#parent_active_usr_withdate</a>
    
    <li><a href="#method-i-parent_free">#parent_free</a>
    
    <li><a href="#method-i-parent_inactive">#parent_inactive</a>
    
    <li><a href="#method-i-parent_inactive_withdate">#parent_inactive_withdate</a>
    
    <li><a href="#method-i-parent_iwave">#parent_iwave</a>
    
    <li><a href="#method-i-parent_percent_calc">#parent_percent_calc</a>
    
    <li><a href="#method-i-parent_percent_calc_withdate">#parent_percent_calc_withdate</a>
    
    <li><a href="#method-i-partner_added">#partner_added</a>
    
    <li><a href="#method-i-partner_added_withdate">#partner_added_withdate</a>
    
    <li><a href="#method-i-pro_inactive">#pro_inactive</a>
    
    <li><a href="#method-i-pro_inactive_withdate">#pro_inactive_withdate</a>
    
    <li><a href="#method-i-prouser_free">#prouser_free</a>
    
    <li><a href="#method-i-prouser_free_withdate">#prouser_free_withdate</a>
    
    <li><a href="#method-i-provider_buy_amount">#provider_buy_amount</a>
    
    <li><a href="#method-i-provider_iwave">#provider_iwave</a>
    
    <li><a href="#method-i-provider_renew_limit">#provider_renew_limit</a>
    
    <li><a href="#method-i-provider_signup_amount">#provider_signup_amount</a>
    
    <li><a href="#method-i-selluser_list">#selluser_list</a>
    
    <li><a href="#method-i-selluser_list_withdate">#selluser_list_withdate</a>
    
    <li><a href="#method-i-spon_pro_list">#spon_pro_list</a>
    
    <li><a href="#method-i-spon_pro_list_withdate">#spon_pro_list_withdate</a>
    
    <li><a href="#method-i-url_format">#url_format</a>
    
    <li><a href="#method-i-url_format_city">#url_format_city</a>
    
    <li><a href="#method-i-url_format_city_cate">#url_format_city_cate</a>
    
    <li><a href="#method-i-url_format_slug">#url_format_slug</a>
    
    <li><a href="#method-i-url_format_subcat_slug">#url_format_subcat_slug</a>
    
    <li><a href="#method-i-user_invited_by_all">#user_invited_by_all</a>
    
    <li><a href="#method-i-user_invited_by_all_withdate">#user_invited_by_all_withdate</a>
    
    <li><a href="#method-i-user_invited_by_parent">#user_invited_by_parent</a>
    
    <li><a href="#method-i-user_invited_by_parent_withdate">#user_invited_by_parent_withdate</a>
    
    <li><a href="#method-i-user_percent_calc">#user_percent_calc</a>
    
    <li><a href="#method-i-user_percent_calc_withdate">#user_percent_calc_withdate</a>
    
  </ul>
</nav>

  </div>

  <div id="project-metadata">
    <nav id="fileindex-section" class="section project-section">
  <h3 class="section-header">Pages</h3>

  <ul>
  
    <li class="file"><a href="./doc/README_FOR_APP.html">README_FOR_APP</a>
  
  </ul>
</nav>

    <nav id="classindex-section" class="section project-section">
  <h3 class="section-header">Class and Module Index</h3>

  <ul class="link-list">
  
    <li><a href="./ActivitiesController.html">ActivitiesController</a>
  
    <li><a href="./ActivitiesHelper.html">ActivitiesHelper</a>
  
    <li><a href="./Activity.html">Activity</a>
  
    <li><a href="./ActivityAttendDetail.html">ActivityAttendDetail</a>
  
    <li><a href="./ActivityAttendDetailsController.html">ActivityAttendDetailsController</a>
  
    <li><a href="./ActivityAttendDetailsHelper.html">ActivityAttendDetailsHelper</a>
  
    <li><a href="./ActivityBid.html">ActivityBid</a>
  
    <li><a href="./ActivityBidsController.html">ActivityBidsController</a>
  
    <li><a href="./ActivityBidsHelper.html">ActivityBidsHelper</a>
  
    <li><a href="./ActivityCategoriesController.html">ActivityCategoriesController</a>
  
    <li><a href="./ActivityCategoriesHelper.html">ActivityCategoriesHelper</a>
  
    <li><a href="./ActivityCategory.html">ActivityCategory</a>
  
    <li><a href="./ActivityClick.html">ActivityClick</a>
  
    <li><a href="./ActivityComment.html">ActivityComment</a>
  
    <li><a href="./ActivityCommentsController.html">ActivityCommentsController</a>
  
    <li><a href="./ActivityCommentsHelper.html">ActivityCommentsHelper</a>
  
    <li><a href="./ActivityCount.html">ActivityCount</a>
  
    <li><a href="./ActivityDetailController.html">ActivityDetailController</a>
  
    <li><a href="./ActivityDetailHelper.html">ActivityDetailHelper</a>
  
    <li><a href="./ActivityDiscountPrice.html">ActivityDiscountPrice</a>
  
    <li><a href="./ActivityFavorite.html">ActivityFavorite</a>
  
    <li><a href="./ActivityFavoritesController.html">ActivityFavoritesController</a>
  
    <li><a href="./ActivityFavoritesHelper.html">ActivityFavoritesHelper</a>
  
    <li><a href="./ActivityForm.html">ActivityForm</a>
  
    <li><a href="./ActivityNetworkController.html">ActivityNetworkController</a>
  
    <li><a href="./ActivityNetworkHelper.html">ActivityNetworkHelper</a>
  
    <li><a href="./ActivityNetworkPermission.html">ActivityNetworkPermission</a>
  
    <li><a href="./ActivityPrice.html">ActivityPrice</a>
  
    <li><a href="./ActivityPricesController.html">ActivityPricesController</a>
  
    <li><a href="./ActivityPricesHelper.html">ActivityPricesHelper</a>
  
    <li><a href="./ActivityRating.html">ActivityRating</a>
  
    <li><a href="./ActivityRatingsController.html">ActivityRatingsController</a>
  
    <li><a href="./ActivityRatingsHelper.html">ActivityRatingsHelper</a>
  
    <li><a href="./ActivityRepeat.html">ActivityRepeat</a>
  
    <li><a href="./ActivityRepeatsController.html">ActivityRepeatsController</a>
  
    <li><a href="./ActivityRepeatsHelper.html">ActivityRepeatsHelper</a>
  
    <li><a href="./ActivityRow.html">ActivityRow</a>
  
    <li><a href="./ActivityRowsController.html">ActivityRowsController</a>
  
    <li><a href="./ActivityRowsHelper.html">ActivityRowsHelper</a>
  
    <li><a href="./ActivitySchedule.html">ActivitySchedule</a>
  
    <li><a href="./ActivitySchedulesController.html">ActivitySchedulesController</a>
  
    <li><a href="./ActivitySchedulesHelper.html">ActivitySchedulesHelper</a>
  
    <li><a href="./ActivitySetting.html">ActivitySetting</a>
  
    <li><a href="./ActivitySettingsDetail.html">ActivitySettingsDetail</a>
  
    <li><a href="./ActivitySettingsType.html">ActivitySettingsType</a>
  
    <li><a href="./ActivityShared.html">ActivityShared</a>
  
    <li><a href="./ActivitySharedsController.html">ActivitySharedsController</a>
  
    <li><a href="./ActivitySharedsHelper.html">ActivitySharedsHelper</a>
  
    <li><a href="./ActivitySubcategoriesController.html">ActivitySubcategoriesController</a>
  
    <li><a href="./ActivitySubcategoriesHelper.html">ActivitySubcategoriesHelper</a>
  
    <li><a href="./ActivitySubcategory.html">ActivitySubcategory</a>
  
    <li><a href="./ActivityTotalCount.html">ActivityTotalCount</a>
  
    <li><a href="./ActivityTrack.html">ActivityTrack</a>
  
    <li><a href="./AdminController.html">AdminController</a>
  
    <li><a href="./AdminDiscountCode.html">AdminDiscountCode</a>
  
    <li><a href="./AdminDiscountCodesController.html">AdminDiscountCodesController</a>
  
    <li><a href="./AdminDiscountCodesHelper.html">AdminDiscountCodesHelper</a>
  
    <li><a href="./AdminHelper.html">AdminHelper</a>
  
    <li><a href="./AgeRangeColorsController.html">AgeRangeColorsController</a>
  
    <li><a href="./AgeRangeColorsHelper.html">AgeRangeColorsHelper</a>
  
    <li><a href="./AgerangeColor.html">AgerangeColor</a>
  
    <li><a href="./AgerangeColorsController.html">AgerangeColorsController</a>
  
    <li><a href="./AgerangeColorsHelper.html">AgerangeColorsHelper</a>
  
    <li><a href="./ApplicationController.html">ApplicationController</a>
  
    <li><a href="./ApplicationHelper.html">ApplicationHelper</a>
  
    <li><a href="./Authentication.html">Authentication</a>
  
    <li><a href="./AuthenticationsController.html">AuthenticationsController</a>
  
    <li><a href="./BlockUser.html">BlockUser</a>
  
    <li><a href="./CheckoutController.html">CheckoutController</a>
  
    <li><a href="./City.html">City</a>
  
    <li><a href="./CityGroup.html">CityGroup</a>
  
    <li><a href="./ContactGroup.html">ContactGroup</a>
  
    <li><a href="./ContactGroupsController.html">ContactGroupsController</a>
  
    <li><a href="./ContactGroupsHelper.html">ContactGroupsHelper</a>
  
    <li><a href="./ContactUser.html">ContactUser</a>
  
    <li><a href="./ContactUserGroup.html">ContactUserGroup</a>
  
    <li><a href="./ContactUsersController.html">ContactUsersController</a>
  
    <li><a href="./ContactUsersHelper.html">ContactUsersHelper</a>
  
    <li><a href="./Country.html">Country</a>
  
    <li><a href="./DefaultFilter.html">DefaultFilter</a>
  
    <li><a href="./DefaultFiltersController.html">DefaultFiltersController</a>
  
    <li><a href="./DefaultFiltersHelper.html">DefaultFiltersHelper</a>
  
    <li><a href="./DeletedSchedule.html">DeletedSchedule</a>
  
    <li><a href="./DetailPageIdentityHelper.html">DetailPageIdentityHelper</a>
  
    <li><a href="./DetailsPageController.html">DetailsPageController</a>
  
    <li><a href="./DetailsPageHelper.html">DetailsPageHelper</a>
  
    <li><a href="./DiscountDollarsController.html">DiscountDollarsController</a>
  
    <li><a href="./DiscountDollarsHelper.html">DiscountDollarsHelper</a>
  
    <li><a href="./EmbedController.html">EmbedController</a>
  
    <li><a href="./ErrorsController.html">ErrorsController</a>
  
    <li><a href="./FamFeeDetail.html">FamFeeDetail</a>
  
    <li><a href="./FamNetwork.html">FamNetwork</a>
  
    <li><a href="./FamNetworkGroup.html">FamNetworkGroup</a>
  
    <li><a href="./FamNetworkGroupsController.html">FamNetworkGroupsController</a>
  
    <li><a href="./FamNetworkGroupsHelper.html">FamNetworkGroupsHelper</a>
  
    <li><a href="./FamNetworkPost.html">FamNetworkPost</a>
  
    <li><a href="./FamNetworkPostsController.html">FamNetworkPostsController</a>
  
    <li><a href="./FamNetworkPostsHelper.html">FamNetworkPostsHelper</a>
  
    <li><a href="./FamNetworkRow.html">FamNetworkRow</a>
  
    <li><a href="./FamNetworksController.html">FamNetworksController</a>
  
    <li><a href="./FamNetworksHelper.html">FamNetworksHelper</a>
  
    <li><a href="./FamPost.html">FamPost</a>
  
    <li><a href="./FamPostsController.html">FamPostsController</a>
  
    <li><a href="./FamPostsHelper.html">FamPostsHelper</a>
  
    <li><a href="./FampassDetail.html">FampassDetail</a>
  
    <li><a href="./FamtivityNetworkMailer.html">FamtivityNetworkMailer</a>
  
    <li><a href="./FeaturedAuditLog.html">FeaturedAuditLog</a>
  
    <li><a href="./FeaturedAuditLogsController.html">FeaturedAuditLogsController</a>
  
    <li><a href="./FeaturedAuditLogsHelper.html">FeaturedAuditLogsHelper</a>
  
    <li><a href="./FollowingUser.html">FollowingUser</a>
  
    <li><a href="./Form.html">Form</a>
  
    <li><a href="./FormQuestion.html">FormQuestion</a>
  
    <li><a href="./FormResult.html">FormResult</a>
  
    <li><a href="./FormResultAnswer.html">FormResultAnswer</a>
  
    <li><a href="./FormsController.html">FormsController</a>
  
    <li><a href="./FormsHelper.html">FormsHelper</a>
  
    <li><a href="./GeneralTag.html">GeneralTag</a>
  
    <li><a href="./GuestDetail.html">GuestDetail</a>
  
    <li><a href="./HomeController.html">HomeController</a>
  
    <li><a href="./HomeHelper.html">HomeHelper</a>
  
    <li><a href="./InviteAttendees.html">InviteAttendees</a>
  
    <li><a href="./InvitesHelper.html">InvitesHelper</a>
  
    <li><a href="./InvitorList.html">InvitorList</a>
  
    <li><a href="./InvitorListHelper.html">InvitorListHelper</a>
  
    <li><a href="./LandingController.html">LandingController</a>
  
    <li><a href="./LandingHelper.html">LandingHelper</a>
  
    <li><a href="./LeadTransaction.html">LeadTransaction</a>
  
    <li><a href="./LoginController.html">LoginController</a>
  
    <li><a href="./LogoutController.html">LogoutController</a>
  
    <li><a href="./Manager.html">Manager</a>
  
    <li><a href="./Message.html">Message</a>
  
    <li><a href="./MessageFile.html">MessageFile</a>
  
    <li><a href="./MessageMailer.html">MessageMailer</a>
  
    <li><a href="./MessageThread.html">MessageThread</a>
  
    <li><a href="./MessageThreadViewer.html">MessageThreadViewer</a>
  
    <li><a href="./MessagesController.html">MessagesController</a>
  
    <li><a href="./MessagesHelper.html">MessagesHelper</a>
  
    <li><a href="./MonthlyBudget.html">MonthlyBudget</a>
  
    <li><a href="./MonthlyBudgetsController.html">MonthlyBudgetsController</a>
  
    <li><a href="./MonthlyBudgetsHelper.html">MonthlyBudgetsHelper</a>
  
    <li><a href="./NewsletterMailer.html">NewsletterMailer</a>
  
    <li><a href="./NewslettersController.html">NewslettersController</a>
  
    <li><a href="./NotificationDetail.html">NotificationDetail</a>
  
    <li><a href="./ParentNotification.html">ParentNotification</a>
  
    <li><a href="./ParentNotificationDetail.html">ParentNotificationDetail</a>
  
    <li><a href="./ParentSetting.html">ParentSetting</a>
  
    <li><a href="./ParentSettingDetail.html">ParentSettingDetail</a>
  
    <li><a href="./ParentSettingsController.html">ParentSettingsController</a>
  
    <li><a href="./Participant.html">Participant</a>
  
    <li><a href="./ParticipantsController.html">ParticipantsController</a>
  
    <li><a href="./ParticipantsHelper.html">ParticipantsHelper</a>
  
    <li><a href="./PaymentDetail.html">PaymentDetail</a>
  
    <li><a href="./PaymentDetailsController.html">PaymentDetailsController</a>
  
    <li><a href="./PaymentDetailsHelper.html">PaymentDetailsHelper</a>
  
    <li><a href="./PoliciesController.html">PoliciesController</a>
  
    <li><a href="./PoliciesHelper.html">PoliciesHelper</a>
  
    <li><a href="./Policy.html">Policy</a>
  
    <li><a href="./PolicyFile.html">PolicyFile</a>
  
    <li><a href="./PolicyType.html">PolicyType</a>
  
    <li><a href="./ProviderActivityFee.html">ProviderActivityFee</a>
  
    <li><a href="./ProviderActivityFeeType.html">ProviderActivityFeeType</a>
  
    <li><a href="./ProviderCount.html">ProviderCount</a>
  
    <li><a href="./ProviderDiscountCode.html">ProviderDiscountCode</a>
  
    <li><a href="./ProviderDiscountCodeType.html">ProviderDiscountCodeType</a>
  
    <li><a href="./ProviderDiscountType.html">ProviderDiscountType</a>
  
    <li><a href="./ProviderLead.html">ProviderLead</a>
  
    <li><a href="./ProviderListController.html">ProviderListController</a>
  
    <li><a href="./ProviderNotification.html">ProviderNotification</a>
  
    <li><a href="./ProviderNotificationDetail.html">ProviderNotificationDetail</a>
  
    <li><a href="./ProviderSetting.html">ProviderSetting</a>
  
    <li><a href="./ProviderSettingDetail.html">ProviderSettingDetail</a>
  
    <li><a href="./ProviderSettingsController.html">ProviderSettingsController</a>
  
    <li><a href="./ProviderSettingsHelper.html">ProviderSettingsHelper</a>
  
    <li><a href="./ProviderTransaction.html">ProviderTransaction</a>
  
    <li><a href="./ProviderTransactionLog.html">ProviderTransactionLog</a>
  
    <li><a href="./ProviderWebsiteTrack.html">ProviderWebsiteTrack</a>
  
    <li><a href="./Question.html">Question</a>
  
    <li><a href="./QuestionType.html">QuestionType</a>
  
    <li><a href="./QuestionValue.html">QuestionValue</a>
  
    <li><a href="./QuickLinksController.html">QuickLinksController</a>
  
    <li><a href="./QuickLinksHelper.html">QuickLinksHelper</a>
  
    <li><a href="./SchoolRepresentative.html">SchoolRepresentative</a>
  
    <li><a href="./SchoolRepresentativesController.html">SchoolRepresentativesController</a>
  
    <li><a href="./SearchController.html">SearchController</a>
  
    <li><a href="./SearchHelper.html">SearchHelper</a>
  
    <li><a href="./SendSMS.html">SendSMS</a>
  
    <li><a href="./Setting.html">Setting</a>
  
    <li><a href="./SettingsController.html">SettingsController</a>
  
    <li><a href="./SettingsHelper.html">SettingsHelper</a>
  
    <li><a href="./SmsStatus.html">SmsStatus</a>
  
    <li><a href="./SocialType.html">SocialType</a>
  
    <li><a href="./SponsorShip.html">SponsorShip</a>
  
    <li><a href="./SponsorShipsController.html">SponsorShipsController</a>
  
    <li><a href="./SponsorShipsHelper.html">SponsorShipsHelper</a>
  
    <li><a href="./State.html">State</a>
  
    <li><a href="./StaticController.html">StaticController</a>
  
    <li><a href="./Support.html">Support</a>
  
    <li><a href="./SupportsController.html">SupportsController</a>
  
    <li><a href="./SupportsHelper.html">SupportsHelper</a>
  
    <li><a href="./Ticket.html">Ticket</a>
  
    <li><a href="./TicketsController.html">TicketsController</a>
  
    <li><a href="./TicketsHelper.html">TicketsHelper</a>
  
    <li><a href="./TransactionDetail.html">TransactionDetail</a>
  
    <li><a href="./User.html">User</a>
  
    <li><a href="./UserBankDetail.html">UserBankDetail</a>
  
    <li><a href="./UserCalender.html">UserCalender</a>
  
    <li><a href="./UserCard.html">UserCard</a>
  
    <li><a href="./UserChild.html">UserChild</a>
  
    <li><a href="./UserChildrenController.html">UserChildrenController</a>
  
    <li><a href="./UserCredit.html">UserCredit</a>
  
    <li><a href="./UserDeactivateLog.html">UserDeactivateLog</a>
  
    <li><a href="./UserDebit.html">UserDebit</a>
  
    <li><a href="./UserDeletedAccount.html">UserDeletedAccount</a>
  
    <li><a href="./UserEmailChangeLog.html">UserEmailChangeLog</a>
  
    <li><a href="./UserMailer.html">UserMailer</a>
  
    <li><a href="./UserNotification.html">UserNotification</a>
  
    <li><a href="./UserProfile.html">UserProfile</a>
  
    <li><a href="./UserProfilesController.html">UserProfilesController</a>
  
    <li><a href="./UserProfilesHelper.html">UserProfilesHelper</a>
  
    <li><a href="./UserRow.html">UserRow</a>
  
    <li><a href="./UserSettingsHelper.html">UserSettingsHelper</a>
  
    <li><a href="./UserTransaction.html">UserTransaction</a>
  
    <li><a href="./UserTransactionsController.html">UserTransactionsController</a>
  
    <li><a href="./UserTransactionsHelper.html">UserTransactionsHelper</a>
  
    <li><a href="./UsersController.html">UsersController</a>
  
    <li><a href="./UsersHelper.html">UsersHelper</a>
  
    <li><a href="./WeekendActivity.html">WeekendActivity</a>
  
    <li><a href="./WeekendMailer.html">WeekendMailer</a>
  
  </ul>
</nav>

  </div>
</nav>

<div id="documentation">
  <h1 class="module">module LandingHelper</h1>

  <div id="description" class="description">
    
  </div><!-- description -->

  
  
  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    

    

    <!-- Methods -->
    
     <section id="public-instance-5Buntitled-5D-method-details" class="method-section section">
      <h3 class="section-header">Public Instance Methods</h3>

    
      <div id="method-i-activity_schedule" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">activity_schedule</span><span
            class="method-args">(act_id)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>get the activity schedule values</p>
          

          
          <div class="method-source-code" id="activity_schedule-source">
            <pre><span class="ruby-comment"># File app/helpers/landing_helper.rb, line 85</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">activity_schedule</span>(<span class="ruby-identifier">act_id</span>)
  <span class="ruby-identifier">activ</span> = <span class="ruby-constant">ActivitySchedule</span>.<span class="ruby-identifier">where</span>(<span class="ruby-string">&quot;activity_id=?&quot;</span>,<span class="ruby-identifier">act_id</span>).<span class="ruby-identifier">last</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- activity_schedule-source -->
          
        </div>

        

        
      </div><!-- activity_schedule-method -->

    
      <div id="method-i-admin_user_lst" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">admin_user_lst</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="admin_user_lst-source">
            <pre><span class="ruby-comment"># File app/helpers/landing_helper.rb, line 264</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">admin_user_lst</span> <span class="ruby-comment">#In Famrivity user report page</span>
  <span class="ruby-comment">#get the sell users list for admin</span>
  <span class="ruby-ivar">@ad_usr</span> = <span class="ruby-constant">User</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-string">&quot;select distinct user_id from users where lower(user_type)='a' and account_active_status=true&quot;</span>).<span class="ruby-identifier">map</span>(&amp;<span class="ruby-value">:user_id</span>).<span class="ruby-identifier">uniq</span>
  <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@ad_usr</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@ad_usr</span><span class="ruby-operator">!=</span><span class="ruby-string">&quot;&quot;</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@ad_usr</span>.<span class="ruby-identifier">present?</span>
    <span class="ruby-ivar">@ad_usr_tot</span> = <span class="ruby-ivar">@ad_usr</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-ivar">@ad_usr_tot</span> = <span class="ruby-value">0</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">return</span> <span class="ruby-ivar">@ad_usr_tot</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- admin_user_lst-source -->
          
        </div>

        

        
      </div><!-- admin_user_lst-method -->

    
      <div id="method-i-age_range_cal" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">age_range_cal</span><span
            class="method-args">(min,max)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>to display min / max age range</p>
          

          
          <div class="method-source-code" id="age_range_cal-source">
            <pre><span class="ruby-comment"># File app/helpers/landing_helper.rb, line 569</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">age_range_cal</span>(<span class="ruby-identifier">min</span>,<span class="ruby-identifier">max</span>)
  <span class="ruby-identifier">check_month1</span> = <span class="ruby-string">''</span>
  <span class="ruby-identifier">check_month2</span> = <span class="ruby-string">''</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">min</span><span class="ruby-operator">==</span><span class="ruby-string">&quot;All&quot;</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">max</span><span class="ruby-operator">==</span><span class="ruby-string">&quot;All&quot;</span>
    <span class="ruby-ivar">@return_value</span> = <span class="ruby-string">'All'</span>
  <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">min</span><span class="ruby-operator">==</span><span class="ruby-string">&quot;Adults&quot;</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">max</span><span class="ruby-operator">==</span><span class="ruby-string">&quot;Adults&quot;</span>
    <span class="ruby-ivar">@return_value</span> = <span class="ruby-string">'Adults'</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">min</span><span class="ruby-operator">==</span><span class="ruby-string">&quot;Adults&quot;</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">min</span><span class="ruby-operator">==</span><span class="ruby-string">&quot;All&quot;</span>
      <span class="ruby-identifier">min_age</span> = <span class="ruby-identifier">min</span>
      <span class="ruby-identifier">age_val_min</span> = <span class="ruby-string">''</span>
      <span class="ruby-identifier">check_month1</span> = <span class="ruby-keyword">false</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">min</span>.<span class="ruby-identifier">to_f</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">1</span>
        <span class="ruby-identifier">min_age</span>=(<span class="ruby-identifier">min</span>.<span class="ruby-identifier">to_f</span>*<span class="ruby-value">12</span>).<span class="ruby-identifier">round</span>
        <span class="ruby-identifier">age_val_min</span> = <span class="ruby-identifier">min_age</span>.<span class="ruby-identifier">to_i</span>
        <span class="ruby-identifier">min_age</span> = <span class="ruby-node">&quot;#{min_age}M&quot;</span>
        <span class="ruby-identifier">check_month1</span> = <span class="ruby-keyword">true</span>
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">age_val_min</span> = <span class="ruby-identifier">min</span>.<span class="ruby-identifier">to_i</span>
        <span class="ruby-identifier">min_age</span> = <span class="ruby-node">&quot;#{min}Y&quot;</span>
        <span class="ruby-identifier">check_month1</span> = <span class="ruby-keyword">false</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
              
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">max</span><span class="ruby-operator">==</span><span class="ruby-string">&quot;Adults&quot;</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">max</span><span class="ruby-operator">==</span><span class="ruby-string">&quot;All&quot;</span>
      <span class="ruby-identifier">max_age</span> = <span class="ruby-identifier">max</span>
      <span class="ruby-identifier">age_val_max</span> = <span class="ruby-string">''</span>
      <span class="ruby-identifier">check_month2</span> = <span class="ruby-keyword">false</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">max</span>.<span class="ruby-identifier">to_f</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">1</span>
        <span class="ruby-identifier">max_age</span>=(<span class="ruby-identifier">max</span>.<span class="ruby-identifier">to_f</span>*<span class="ruby-value">12</span>).<span class="ruby-identifier">round</span>
        <span class="ruby-identifier">age_val_max</span> = <span class="ruby-identifier">max_age</span>.<span class="ruby-identifier">to_i</span>
        <span class="ruby-identifier">max_age</span> = <span class="ruby-node">&quot;#{max_age}M&quot;</span>
        <span class="ruby-identifier">check_month2</span> = <span class="ruby-keyword">true</span>
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">age_val_max</span> = <span class="ruby-identifier">max</span>.<span class="ruby-identifier">to_i</span>
        <span class="ruby-identifier">max_age</span> = <span class="ruby-node">&quot;#{max}Y&quot;</span>
        <span class="ruby-identifier">check_month2</span> = <span class="ruby-keyword">false</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
              
    <span class="ruby-keyword">if</span>(<span class="ruby-identifier">check_month1</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">check_month2</span>)
      <span class="ruby-comment">#Age Range Calculations for month and month</span>
      <span class="ruby-keyword">if</span>(<span class="ruby-identifier">age_val_min</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">Integer</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">age_val_min</span>.<span class="ruby-identifier">to_i</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">age_val_max</span>.<span class="ruby-identifier">to_i</span>)
        <span class="ruby-ivar">@return_value1</span> = (<span class="ruby-identifier">age_val_min</span>.<span class="ruby-identifier">to_i</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span>) <span class="ruby-operator">?</span> <span class="ruby-string">&quot;Birth&quot;</span> <span class="ruby-operator">:</span> <span class="ruby-node">&quot;#{age_val_min.to_i} #{age_val_min.to_i &gt; 1 ? 'Months' : 'Month'}&quot;</span>
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">check_month1</span> = <span class="ruby-string">''</span>
        <span class="ruby-identifier">check_month2</span> = <span class="ruby-string">''</span>
        <span class="ruby-ivar">@return_value1</span> = <span class="ruby-node">&quot;#{min_age} - #{max_age}&quot;</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">elsif</span>(<span class="ruby-operator">!</span><span class="ruby-identifier">check_month1</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">check_month2</span>)
      <span class="ruby-comment">#Age Range Calculations for year and year combinations</span>
      <span class="ruby-keyword">if</span>(<span class="ruby-identifier">age_val_min</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">Integer</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">age_val_min</span>.<span class="ruby-identifier">to_i</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">age_val_max</span>.<span class="ruby-identifier">to_i</span>)
        <span class="ruby-ivar">@return_value1</span> = <span class="ruby-node">&quot;#{age_val_min.to_i} #{(age_val_min.to_i &gt; 1) ? 'Years' : 'Year'}&quot;</span>
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">check_month1</span> = <span class="ruby-string">''</span>
        <span class="ruby-identifier">check_month2</span> = <span class="ruby-string">''</span>
        <span class="ruby-ivar">@return_value1</span> = <span class="ruby-node">&quot;#{min_age} - #{max_age}&quot;</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">check_month1</span> = <span class="ruby-string">''</span>
      <span class="ruby-identifier">check_month2</span> = <span class="ruby-string">''</span>
      <span class="ruby-ivar">@return_value1</span> = <span class="ruby-node">&quot;#{min_age} - #{max_age}&quot;</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-ivar">@return_value</span> = <span class="ruby-ivar">@return_value1</span>
    <span class="ruby-comment">#~ else</span>
    <span class="ruby-comment">#~ if min.to_f &lt; 1</span>
                      <span class="ruby-comment">#~ min_age=(min.to_f*12).round</span>
                      <span class="ruby-comment">#~ min_age = &quot;#{min_age}M&quot;</span>
                      
    <span class="ruby-comment">#~ else</span>
                      <span class="ruby-comment">#~ min_age = &quot;#{min}Y&quot;</span>
    <span class="ruby-comment">#~ end</span>
    <span class="ruby-comment">#~ if max.to_f &lt; 1</span>
                      <span class="ruby-comment">#~ max_age=(max.to_f*12).round</span>
                      <span class="ruby-comment">#~ max_age = &quot;#{max_age}M&quot;</span>
    <span class="ruby-comment">#~ else</span>
                      <span class="ruby-comment">#~ max_age = max</span>
                      <span class="ruby-comment">#~ max_age = &quot;#{max}Y&quot;</span>
    <span class="ruby-comment">#~ end</span>
    <span class="ruby-comment">#~ return &quot;#{min_age}-#{max_age}&quot;</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">return</span> <span class="ruby-ivar">@return_value</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- age_range_cal-source -->
          
        </div>

        

        
      </div><!-- age_range_cal-method -->

    
      <div id="method-i-any_time_activity" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">any_time_activity</span><span
            class="method-args">(act_id)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>get the anytime activities business hours</p>
          

          
          <div class="method-source-code" id="any_time_activity-source">
            <pre><span class="ruby-comment"># File app/helpers/landing_helper.rb, line 95</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">any_time_activity</span>(<span class="ruby-identifier">act_id</span>)
  <span class="ruby-ivar">@a_time</span>=<span class="ruby-string">&quot;&quot;</span>
  <span class="ruby-ivar">@a_time</span>= <span class="ruby-constant">ActivitySchedule</span>.<span class="ruby-identifier">where</span>(<span class="ruby-string">&quot;activity_id = ?&quot;</span>,<span class="ruby-identifier">act_id</span>)
  <span class="ruby-ivar">@act</span> = <span class="ruby-constant">Activity</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">act_id</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@act</span>.<span class="ruby-identifier">created_by</span>.<span class="ruby-identifier">downcase</span><span class="ruby-operator">==</span><span class="ruby-string">'provider'</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@a_time</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@a_time</span>.<span class="ruby-identifier">present?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@a_time</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">schedule_mode</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@a_time</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">schedule_mode</span>.<span class="ruby-identifier">present?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@a_time</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">schedule_mode</span><span class="ruby-operator">==</span><span class="ruby-string">&quot;Any Time&quot;</span>
    <span class="ruby-ivar">@repeat_days</span>=<span class="ruby-string">&quot;&quot;</span>
    <span class="ruby-ivar">@repeat_days</span>=[]
    <span class="ruby-ivar">@a_time</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">any_time</span><span class="ruby-operator">|</span>
      <span class="ruby-ivar">@repeat_days</span><span class="ruby-operator">&lt;&lt;</span><span class="ruby-identifier">any_time</span>.<span class="ruby-identifier">business_hours</span>.<span class="ruby-identifier">downcase</span> <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">any_time</span>.<span class="ruby-identifier">nil?</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">return</span> <span class="ruby-ivar">@repeat_days</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- any_time_activity-source -->
          
        </div>

        

        
      </div><!-- any_time_activity-method -->

    
      <div id="method-i-curator_added" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">curator_added</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="curator_added-source">
            <pre><span class="ruby-comment"># File app/helpers/landing_helper.rb, line 198</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">curator_added</span> <span class="ruby-comment">#In Famrivity user report page</span>
  <span class="ruby-comment">#get the  users list for curator</span>
  <span class="ruby-ivar">@curt_add</span> = <span class="ruby-constant">User</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-string">&quot;select distinct user_id from users where lower(user_type)='p' and lower(user_plan)='curator' and account_active_status=true&quot;</span>).<span class="ruby-identifier">map</span>(&amp;<span class="ruby-value">:user_id</span>).<span class="ruby-identifier">uniq</span>
  <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@curt_add</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@curt_add</span><span class="ruby-operator">!=</span><span class="ruby-string">&quot;&quot;</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@curt_add</span>.<span class="ruby-identifier">present?</span>
    <span class="ruby-ivar">@curt_add_tot</span> = <span class="ruby-ivar">@curt_add</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-ivar">@curt_add_tot</span> = <span class="ruby-value">0</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">return</span> <span class="ruby-ivar">@curt_add_tot</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- curator_added-source -->
          
        </div>

        

        
      </div><!-- curator_added-method -->

    
      <div id="method-i-curator_added_withdate" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">curator_added_withdate</span><span
            class="method-args">(sdate,edate)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="curator_added_withdate-source">
            <pre><span class="ruby-comment"># File app/helpers/landing_helper.rb, line 209</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">curator_added_withdate</span>(<span class="ruby-identifier">sdate</span>,<span class="ruby-identifier">edate</span>) <span class="ruby-comment">#In Famrivity user report page</span>
  <span class="ruby-comment">#get the  users list for curator</span>
  <span class="ruby-ivar">@curt_add</span> = <span class="ruby-constant">User</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-node">&quot;select distinct user_id from users where lower(user_type)='p' and lower(user_plan)='curator' and account_active_status=true and date(user_created_date) between date('#{sdate}') and date('#{edate}')&quot;</span>).<span class="ruby-identifier">map</span>(&amp;<span class="ruby-value">:user_id</span>).<span class="ruby-identifier">uniq</span>
  <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@curt_add</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@curt_add</span><span class="ruby-operator">!=</span><span class="ruby-string">&quot;&quot;</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@curt_add</span>.<span class="ruby-identifier">present?</span>
    <span class="ruby-ivar">@curt_add_tot</span> = <span class="ruby-ivar">@curt_add</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-ivar">@curt_add_tot</span> = <span class="ruby-value">0</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">return</span> <span class="ruby-ivar">@curt_add_tot</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- curator_added_withdate-source -->
          
        </div>

        

        
      </div><!-- curator_added_withdate-method -->

    
      <div id="method-i-facebook_parent" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">facebook_parent</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="facebook_parent-source">
            <pre><span class="ruby-comment"># File app/helpers/landing_helper.rb, line 297</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">facebook_parent</span>
      <span class="ruby-comment">#get the facebook parent list</span>
  <span class="ruby-ivar">@fb_parent</span>=<span class="ruby-constant">User</span>.<span class="ruby-identifier">find_by_sql</span>([<span class="ruby-string">&quot;select distinct user_id from users where lower(user_type)='u' and account_active_status='true' and fb_id is not null&quot;</span>]).<span class="ruby-identifier">map</span>(&amp;<span class="ruby-value">:user_id</span>).<span class="ruby-identifier">uniq</span>
  <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@fb_parent</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@fb_parent</span><span class="ruby-operator">!=</span><span class="ruby-string">&quot;&quot;</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@fb_parent</span>.<span class="ruby-identifier">present?</span>
        <span class="ruby-ivar">@fb_parent_total</span> = <span class="ruby-ivar">@fb_parent</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-ivar">@fb_parent_total</span> = <span class="ruby-value">0</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">return</span> <span class="ruby-ivar">@fb_parent_total</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- facebook_parent-source -->
          
        </div>

        

        
      </div><!-- facebook_parent-method -->

    
      <div id="method-i-facebook_parent_withdate" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">facebook_parent_withdate</span><span
            class="method-args">(sdate,edate)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>face book parent with date</p>
          

          
          <div class="method-source-code" id="facebook_parent_withdate-source">
            <pre><span class="ruby-comment"># File app/helpers/landing_helper.rb, line 309</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">facebook_parent_withdate</span>(<span class="ruby-identifier">sdate</span>,<span class="ruby-identifier">edate</span>)
      <span class="ruby-comment">#get the facebook parent list</span>
  <span class="ruby-ivar">@fb_parent</span>=<span class="ruby-constant">User</span>.<span class="ruby-identifier">find_by_sql</span>([<span class="ruby-node">&quot;select distinct user_id from users where lower(user_type)='u' and account_active_status='true' and fb_id is not null and date(user_created_date) between date('#{sdate}') and date('#{edate}')&quot;</span>]).<span class="ruby-identifier">map</span>(&amp;<span class="ruby-value">:user_id</span>).<span class="ruby-identifier">uniq</span>
  <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@fb_parent</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@fb_parent</span><span class="ruby-operator">!=</span><span class="ruby-string">&quot;&quot;</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@fb_parent</span>.<span class="ruby-identifier">present?</span>
        <span class="ruby-ivar">@fb_parent_total</span> = <span class="ruby-ivar">@fb_parent</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-ivar">@fb_parent_total</span> = <span class="ruby-value">0</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">return</span> <span class="ruby-ivar">@fb_parent_total</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- facebook_parent_withdate-source -->
          
        </div>

        

        
      </div><!-- facebook_parent_withdate-method -->

    
      <div id="method-i-facebook_provider" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">facebook_provider</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="facebook_provider-source">
            <pre><span class="ruby-comment"># File app/helpers/landing_helper.rb, line 320</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">facebook_provider</span>
      <span class="ruby-comment">#get the facebook provider list</span>
  <span class="ruby-ivar">@fb_provider</span>=<span class="ruby-constant">User</span>.<span class="ruby-identifier">find_by_sql</span>([<span class="ruby-string">&quot;SELECT * FROM Users Where lower(user_type)='p' and account_active_status='true' and fb_id is not null&quot;</span>])
  <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@fb_provider</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@fb_provider</span><span class="ruby-operator">!=</span><span class="ruby-string">&quot;&quot;</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@fb_provider</span>.<span class="ruby-identifier">present?</span>
        <span class="ruby-ivar">@fb_provider_total</span> = <span class="ruby-ivar">@fb_provider</span>.<span class="ruby-identifier">length</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-ivar">@fb_provider_total</span> = <span class="ruby-value">0</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">return</span> <span class="ruby-ivar">@fb_provider_total</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- facebook_provider-source -->
          
        </div>

        

        
      </div><!-- facebook_provider-method -->

    
      <div id="method-i-find_activity" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">find_activity</span><span
            class="method-args">(act_id)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>get the activity id</p>
          

          
          <div class="method-source-code" id="find_activity-source">
            <pre><span class="ruby-comment"># File app/helpers/landing_helper.rb, line 90</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">find_activity</span>(<span class="ruby-identifier">act_id</span>)
  <span class="ruby-identifier">activ</span> = <span class="ruby-constant">Activity</span>.<span class="ruby-identifier">where</span>(<span class="ruby-string">&quot;activity_id=?&quot;</span>,<span class="ruby-identifier">act_id</span>).<span class="ruby-identifier">last</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- find_activity-source -->
          
        </div>

        

        
      </div><!-- find_activity-method -->

    
      <div id="method-i-fndPrevPage" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">fndPrevPage</span><span
            class="method-args">(prev_url,throu_login)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="fndPrevPage-source">
            <pre><span class="ruby-comment"># File app/helpers/landing_helper.rb, line 941</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">fndPrevPage</span>(<span class="ruby-identifier">prev_url</span>,<span class="ruby-identifier">throu_login</span>)
        <span class="ruby-keyword">if</span> <span class="ruby-identifier">prev_url</span>.<span class="ruby-identifier">present?</span>
                <span class="ruby-identifier">res</span> = <span class="ruby-keyword">false</span>
                <span class="ruby-identifier">prev_url</span> = <span class="ruby-identifier">prev_url</span>.<span class="ruby-identifier">split</span>(<span class="ruby-string">&quot;?&quot;</span>)[<span class="ruby-value">0</span>]
                <span class="ruby-comment">#~ is_quick_link_url = prev_url.split(&quot;-&quot;).last</span>
                <span class="ruby-identifier">quick_url</span> = <span class="ruby-identifier">prev_url</span>.<span class="ruby-identifier">split</span>(<span class="ruby-string">&quot;/&quot;</span>).<span class="ruby-identifier">last</span>
                <span class="ruby-identifier">quick_links</span> = [<span class="ruby-string">&quot;discount-dollar-activities&quot;</span>,<span class="ruby-string">&quot;special-activities&quot;</span>,<span class="ruby-string">&quot;free-activities&quot;</span>,<span class="ruby-string">&quot;camp-activities&quot;</span>,<span class="ruby-string">&quot;special-needs-activities&quot;</span>]
                <span class="ruby-identifier">is_quick_link_url</span> = <span class="ruby-identifier">quick_links</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">quick_url</span>)
                <span class="ruby-keyword">if</span> (<span class="ruby-identifier">prev_url</span><span class="ruby-operator">==</span><span class="ruby-identifier">search_url</span>) <span class="ruby-operator">||</span> (<span class="ruby-identifier">is_quick_link_url</span>) <span class="ruby-operator">||</span> (<span class="ruby-identifier">throu_login</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">throu_login</span><span class="ruby-operator">==</span><span class="ruby-string">'Search'</span>)
                        <span class="ruby-identifier">page</span> = <span class="ruby-string">'Search'</span>
                        <span class="ruby-identifier">res</span> = <span class="ruby-keyword">true</span>
                <span class="ruby-keyword">elsif</span> (<span class="ruby-identifier">prev_url</span><span class="ruby-operator">==</span><span class="ruby-identifier">root_url</span>) <span class="ruby-operator">||</span> (<span class="ruby-identifier">throu_login</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">throu_login</span>.<span class="ruby-identifier">present?</span>) <span class="ruby-operator">||</span> (<span class="ruby-identifier">throu_login</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">throu_login</span><span class="ruby-operator">==</span><span class="ruby-string">'Home'</span>)
                        <span class="ruby-identifier">page</span> = <span class="ruby-string">'Home'</span>
                        <span class="ruby-identifier">res</span> = <span class="ruby-keyword">true</span>
                <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">return</span> <span class="ruby-identifier">page</span>,<span class="ruby-identifier">res</span>
        <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- fndPrevPage-source -->
          
        </div>

        

        
      </div><!-- fndPrevPage-method -->

    
      <div id="method-i-get_activity" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">get_activity</span><span
            class="method-args">(act_id)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>get the activity details for not provider side</p>
          

          
          <div class="method-source-code" id="get_activity-source">
            <pre><span class="ruby-comment"># File app/helpers/landing_helper.rb, line 59</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">get_activity</span>(<span class="ruby-identifier">act_id</span>)
  <span class="ruby-comment">#~ activ = Activity.where(&quot;activity_id=?&quot;,act_id).last</span>
  <span class="ruby-identifier">act_price</span> = <span class="ruby-string">&quot;&quot;</span>
  <span class="ruby-identifier">act_price</span> =  <span class="ruby-constant">ActivityPrice</span>.<span class="ruby-identifier">joins</span>(<span class="ruby-value">:activity_schedule</span>).<span class="ruby-identifier">where</span>(<span class="ruby-string">&quot;activity_prices.activity_id = ? AND expiration_date &gt;= ?&quot;</span>,<span class="ruby-identifier">act_id</span>,<span class="ruby-constant">Date</span>.<span class="ruby-identifier">today</span> )<span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">act_id</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">act_id</span>.<span class="ruby-identifier">present?</span>
  <span class="ruby-comment">#act_price= ActivityPrice.where(&quot;activity_id = ?&quot;, act_id) if !act_id.nil? &amp;&amp; act_id.present?</span>
  <span class="ruby-keyword">return</span> <span class="ruby-identifier">act_price</span> <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">act_price</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">act_price!</span>=<span class="ruby-string">&quot;&quot;</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">act_price</span>.<span class="ruby-identifier">present?</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- get_activity-source -->
          
        </div>

        

        
      </div><!-- get_activity-method -->

    
      <div id="method-i-get_activity_provider" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">get_activity_provider</span><span
            class="method-args">(act_id)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>get the activity details for provider side</p>
          

          
          <div class="method-source-code" id="get_activity_provider-source">
            <pre><span class="ruby-comment"># File app/helpers/landing_helper.rb, line 51</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">get_activity_provider</span>(<span class="ruby-identifier">act_id</span>)
  <span class="ruby-comment">#~ activ = Activity.where(&quot;activity_id=?&quot;,act_id).last</span>
  <span class="ruby-identifier">act_price</span> = <span class="ruby-string">&quot;&quot;</span>
  <span class="ruby-identifier">act_price</span>= <span class="ruby-constant">ActivityPrice</span>.<span class="ruby-identifier">where</span>(<span class="ruby-string">&quot;activity_id = ?&quot;</span>, <span class="ruby-identifier">act_id</span>) <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">act_id</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">act_id</span>.<span class="ruby-identifier">present?</span>
  <span class="ruby-keyword">return</span> <span class="ruby-identifier">act_price</span> <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">act_price</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">act_price!</span>=<span class="ruby-string">&quot;&quot;</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">act_price</span>.<span class="ruby-identifier">present?</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- get_activity_provider-source -->
          
        </div>

        

        
      </div><!-- get_activity_provider-method -->

    
      <div id="method-i-get_balance" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">get_balance</span><span
            class="method-args">(user_id)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>get the user current balance by rajkumar</p>
          

          
          <div class="method-source-code" id="get_balance-source">
            <pre><span class="ruby-comment"># File app/helpers/landing_helper.rb, line 75</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">get_balance</span>(<span class="ruby-identifier">user_id</span>)
  <span class="ruby-ivar">@cdt_lst</span> = <span class="ruby-constant">UserCredit</span>.<span class="ruby-identifier">where</span>(<span class="ruby-string">&quot;user_id=?&quot;</span>,<span class="ruby-identifier">user_id</span>)
  <span class="ruby-ivar">@dbt_lst</span> = <span class="ruby-constant">UserDebit</span>.<span class="ruby-identifier">where</span>(<span class="ruby-string">&quot;user_id=?&quot;</span>,<span class="ruby-identifier">user_id</span>)
  <span class="ruby-ivar">@t_cred_amt</span> =  (<span class="ruby-operator">!</span><span class="ruby-ivar">@cdt_lst</span>.<span class="ruby-identifier">nil?</span>) <span class="ruby-operator">?</span> <span class="ruby-ivar">@cdt_lst</span>.<span class="ruby-identifier">sum</span>(&amp;<span class="ruby-value">:credit_amount</span>) <span class="ruby-operator">:</span> <span class="ruby-value">0</span>
  <span class="ruby-ivar">@t_debit_amt</span> = (<span class="ruby-operator">!</span><span class="ruby-ivar">@dbt_lst</span>.<span class="ruby-identifier">nil?</span>) <span class="ruby-operator">?</span> <span class="ruby-ivar">@dbt_lst</span>.<span class="ruby-identifier">sum</span>(&amp;<span class="ruby-value">:debited_amount</span>) <span class="ruby-operator">:</span> <span class="ruby-value">0</span>
  <span class="ruby-ivar">@crt_balance</span> = (<span class="ruby-ivar">@t_cred_amt</span><span class="ruby-operator">-</span><span class="ruby-ivar">@t_debit_amt</span>)
  <span class="ruby-keyword">return</span> <span class="ruby-ivar">@crt_balance</span> <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@crt_balance</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@crt_balance</span>.<span class="ruby-identifier">present?</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- get_balance-source -->
          
        </div>

        

        
      </div><!-- get_balance-method -->

    
      <div id="method-i-get_embed_data" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">get_embed_data</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="get_embed_data-source">
            <pre><span class="ruby-comment"># File app/helpers/landing_helper.rb, line 67</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">get_embed_data</span>
  <span class="ruby-ivar">@activity</span>= <span class="ruby-constant">Activity</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-node">&quot;select * from activities where user_id=#{current_user.user_id} and cleaned=true and lower(active_status)='active' and lower(created_by)='provider' order by activity_id desc limit 200&quot;</span>) <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">current_user</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">current_user</span>.<span class="ruby-identifier">present?</span>
  <span class="ruby-ivar">@act_id</span> = <span class="ruby-ivar">@activity</span>.<span class="ruby-identifier">map</span>(&amp;<span class="ruby-value">:activity_id</span>) <span class="ruby-keyword">if</span> <span class="ruby-ivar">@activity</span>
  <span class="ruby-keyword">return</span> <span class="ruby-ivar">@act_id</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- get_embed_data-source -->
          
        </div>

        

        
      </div><!-- get_embed_data-method -->

    
      <div id="method-i-get_purchase_status" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">get_purchase_status</span><span
            class="method-args">(activityid,userid)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>buy now get info button logic</p>
          

          
          <div class="method-source-code" id="get_purchase_status-source">
            <pre><span class="ruby-comment"># File app/helpers/landing_helper.rb, line 656</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">get_purchase_status</span>(<span class="ruby-identifier">activityid</span>,<span class="ruby-identifier">userid</span>)
  <span class="ruby-ivar">@str</span> =<span class="ruby-string">''</span>
              <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">activityid</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">activityid!</span>=<span class="ruby-string">''</span>
                      <span class="ruby-ivar">@userid</span> = <span class="ruby-identifier">userid</span>
                      <span class="ruby-ivar">@activity</span> = <span class="ruby-constant">Activity</span>.<span class="ruby-identifier">fetch</span>(<span class="ruby-identifier">activityid</span>)       
                      <span class="ruby-comment">#price - advance , net and free goes here</span>
                      <span class="ruby-ivar">@act_user</span> = <span class="ruby-constant">User</span>.<span class="ruby-identifier">fetch</span>(<span class="ruby-ivar">@activity</span>.<span class="ruby-identifier">user_id</span>)
                      <span class="ruby-ivar">@today</span> = <span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>.<span class="ruby-identifier">strftime</span>(<span class="ruby-string">&quot;%Y-%m-%d&quot;</span>)
                      
                      <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@activity</span>.<span class="ruby-identifier">nil?</span>                   
                              <span class="ruby-comment">#~ @schedule = ActivitySchedule.find_by_sql(&quot;select distinct(activity_id) from activity_schedules where activity_id=#{activityid} and date(expiration_date) &gt;= '#{@today}'&quot;)                        </span>
                              <span class="ruby-ivar">@schedule</span> = <span class="ruby-ivar">@activity</span>.<span class="ruby-identifier">fetch_activity_schedule</span>.<span class="ruby-identifier">where</span>(<span class="ruby-string">&quot;expiration_date &gt;= ?&quot;</span>,<span class="ruby-constant">Date</span>.<span class="ruby-identifier">today</span>) <span class="ruby-keyword">if</span> <span class="ruby-ivar">@activity</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@activity</span>.<span class="ruby-identifier">present?</span>   
                              
                              <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@activity</span>.<span class="ruby-identifier">created_by</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@activity</span>.<span class="ruby-identifier">created_by!</span>=<span class="ruby-string">''</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@activity</span>.<span class="ruby-identifier">created_by</span>.<span class="ruby-identifier">downcase</span> <span class="ruby-operator">==</span> <span class="ruby-string">'provider'</span>
                                      
                                      <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@act_user</span>.<span class="ruby-identifier">nil?</span> 
                                              <span class="ruby-keyword">if</span> <span class="ruby-ivar">@act_user</span>.<span class="ruby-identifier">user_flag</span> <span class="ruby-operator">==</span> <span class="ruby-keyword">false</span>
                                                      <span class="ruby-ivar">@str</span> = <span class="ruby-string">'curator'</span>
                                              <span class="ruby-keyword">elsif</span> <span class="ruby-ivar">@act_user</span>.<span class="ruby-identifier">user_flag</span> <span class="ruby-operator">==</span> <span class="ruby-keyword">true</span> 
                                                      <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@activity</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@activity</span>.<span class="ruby-identifier">purchase_url</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@activity</span>.<span class="ruby-identifier">purchase_url!</span>=<span class="ruby-string">''</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@activity</span>.<span class="ruby-identifier">purchase_url</span>.<span class="ruby-identifier">present?</span>
                                                              <span class="ruby-ivar">@str</span> = <span class="ruby-string">'buy now'</span>
                                                      <span class="ruby-keyword">else</span>
                                                              <span class="ruby-keyword">if</span> <span class="ruby-ivar">@activity</span>.<span class="ruby-identifier">price_type</span> <span class="ruby-operator">==</span> <span class="ruby-string">'4'</span>
                                                                      <span class="ruby-ivar">@str</span> = <span class="ruby-string">'get info'</span>                                                                      
                                                              <span class="ruby-keyword">elsif</span> <span class="ruby-ivar">@activity</span>.<span class="ruby-identifier">price_type</span> <span class="ruby-operator">==</span> <span class="ruby-string">'3'</span>
                                                                      <span class="ruby-keyword">if</span> <span class="ruby-ivar">@act_user</span>.<span class="ruby-identifier">user_plan</span>.<span class="ruby-identifier">downcase</span> <span class="ruby-operator">==</span> <span class="ruby-string">'free'</span>  <span class="ruby-operator">&amp;&amp;</span> (<span class="ruby-ivar">@act_user</span>.<span class="ruby-identifier">manage_plan</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">||</span> <span class="ruby-ivar">@act_user</span>.<span class="ruby-identifier">manage_plan</span>.<span class="ruby-identifier">empty?</span>)
                                                                              <span class="ruby-ivar">@str</span> = <span class="ruby-string">'get info'</span>
                                                                      <span class="ruby-keyword">else</span>
                                                                              <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@schedule</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@schedule</span>.<span class="ruby-identifier">present?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@schedule</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
                                                                                      <span class="ruby-ivar">@str</span> = <span class="ruby-string">'attend'</span>
                                                                              <span class="ruby-keyword">else</span>                                                                          
                                                                                      <span class="ruby-ivar">@str</span> = <span class="ruby-string">'get info'</span>                                                                                                                                                            
                                                                              <span class="ruby-keyword">end</span>
                                                                      <span class="ruby-keyword">end</span>
                                                              <span class="ruby-keyword">else</span>            
                                                                      <span class="ruby-ivar">@pro_trans</span> = <span class="ruby-constant">ProviderTransaction</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-node">&quot;select * from provider_transactions where user_id=#{@act_user.user_id} and date(grace_period_date) &gt;= '#{@today}' order by id desc limit 1&quot;</span>)
                                                                      
                                                                      <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@activity</span>.<span class="ruby-identifier">schedule_mode</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@activity</span>.<span class="ruby-identifier">schedule_mode!</span>=<span class="ruby-string">''</span> <span class="ruby-operator">&amp;&amp;</span> (<span class="ruby-ivar">@activity</span>.<span class="ruby-identifier">schedule_mode</span>.<span class="ruby-identifier">downcase</span> <span class="ruby-operator">==</span> <span class="ruby-string">'by appointment'</span> <span class="ruby-operator">||</span> <span class="ruby-ivar">@activity</span>.<span class="ruby-identifier">schedule_mode</span>.<span class="ruby-identifier">downcase</span> <span class="ruby-operator">==</span> <span class="ruby-string">'any where'</span> <span class="ruby-operator">||</span> <span class="ruby-ivar">@activity</span>.<span class="ruby-identifier">schedule_mode</span>.<span class="ruby-identifier">downcase</span> <span class="ruby-operator">==</span> <span class="ruby-string">'any time'</span>)
                                                                              <span class="ruby-comment">#schedule - anytime, any where and by appoinment goes here</span>
                                                                              <span class="ruby-keyword">if</span> <span class="ruby-ivar">@act_user</span>.<span class="ruby-identifier">user_plan</span>.<span class="ruby-identifier">downcase</span> <span class="ruby-operator">==</span> <span class="ruby-string">'free'</span> <span class="ruby-operator">&amp;&amp;</span> (<span class="ruby-ivar">@act_user</span>.<span class="ruby-identifier">manage_plan</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">||</span> <span class="ruby-ivar">@act_user</span>.<span class="ruby-identifier">manage_plan</span>.<span class="ruby-identifier">empty?</span>)
                                                                                      <span class="ruby-ivar">@str</span> = <span class="ruby-string">'get info'</span>
                                                                              <span class="ruby-keyword">elsif</span> <span class="ruby-ivar">@act_user</span>.<span class="ruby-identifier">user_plan</span>.<span class="ruby-identifier">downcase</span> <span class="ruby-operator">==</span> <span class="ruby-string">'sell'</span><span class="ruby-operator">&amp;&amp;</span> (<span class="ruby-ivar">@act_user</span>.<span class="ruby-identifier">manage_plan</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">||</span> <span class="ruby-ivar">@act_user</span>.<span class="ruby-identifier">manage_plan</span>.<span class="ruby-identifier">empty?</span>)
                                                                                      <span class="ruby-ivar">@str</span> = <span class="ruby-string">'buy now'</span>
                                                                              <span class="ruby-keyword">elsif</span> <span class="ruby-ivar">@act_user</span>.<span class="ruby-identifier">user_plan</span>.<span class="ruby-identifier">downcase</span> <span class="ruby-operator">==</span> <span class="ruby-string">'sell'</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@act_user</span>.<span class="ruby-identifier">manage_plan</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@act_user</span>.<span class="ruby-identifier">manage_plan</span> <span class="ruby-operator">!=</span> <span class="ruby-string">''</span>
                                                                                      <span class="ruby-comment">#check sales limit</span>
                                                                                      <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@pro_trans</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@pro_trans</span>.<span class="ruby-identifier">present?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@pro_trans</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>          
                                                                                              <span class="ruby-ivar">@str</span> = <span class="ruby-string">'buy now'</span>
                                                                                              <span class="ruby-comment">#~ if !@pro_trans[0].nil? &amp;&amp; @pro_trans[0].sales_limit.to_i &gt; @pro_trans[0].purchase_limit.to_i</span>
                                                                                                      <span class="ruby-comment">#~ @str = 'buy now'</span>
                                                                                              <span class="ruby-comment">#~ else</span>
                                                                                                      <span class="ruby-comment">#~ @str ='get info'</span>
                                                                                              <span class="ruby-comment">#~ end</span>
                                                                                      <span class="ruby-keyword">else</span>                                                                 
                                                                                              <span class="ruby-keyword">if</span> <span class="ruby-ivar">@act_user</span>.<span class="ruby-identifier">is_partner</span> <span class="ruby-operator">==</span> <span class="ruby-keyword">true</span>
                                                                                                      <span class="ruby-ivar">@str</span> = <span class="ruby-string">'buy now'</span>
                                                                                              <span class="ruby-keyword">else</span>
                                                                                                      <span class="ruby-ivar">@str</span> = <span class="ruby-string">'get info'</span>
                                                                                              <span class="ruby-keyword">end</span>
                                                                                              
                                                                                      <span class="ruby-keyword">end</span>
                                                                              <span class="ruby-keyword">elsif</span> <span class="ruby-ivar">@act_user</span>.<span class="ruby-identifier">user_plan</span>.<span class="ruby-identifier">downcase</span> <span class="ruby-operator">==</span> <span class="ruby-string">'curator'</span>
                                                                                      <span class="ruby-ivar">@str</span> = <span class="ruby-string">'get info'</span>
                                                                              <span class="ruby-keyword">else</span>
                                                                                      <span class="ruby-ivar">@str</span> = <span class="ruby-string">'get info'</span>
                                                                              <span class="ruby-keyword">end</span>           
                                                                      <span class="ruby-keyword">else</span>   
                                                                              <span class="ruby-comment">#schedule - schedule and whole day</span>
                                                                              <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@schedule</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@schedule</span>.<span class="ruby-identifier">present?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@schedule</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
                                                                                      <span class="ruby-keyword">if</span> <span class="ruby-ivar">@act_user</span>.<span class="ruby-identifier">user_plan</span>.<span class="ruby-identifier">downcase</span> <span class="ruby-operator">==</span> <span class="ruby-string">'free'</span>  <span class="ruby-operator">&amp;&amp;</span> (<span class="ruby-ivar">@act_user</span>.<span class="ruby-identifier">manage_plan</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">||</span> <span class="ruby-ivar">@act_user</span>.<span class="ruby-identifier">manage_plan</span>.<span class="ruby-identifier">empty?</span>)
                                                                                              <span class="ruby-ivar">@str</span> = <span class="ruby-string">'get info'</span>
                                                                                      <span class="ruby-keyword">elsif</span> <span class="ruby-ivar">@act_user</span>.<span class="ruby-identifier">user_plan</span>.<span class="ruby-identifier">downcase</span> <span class="ruby-operator">==</span> <span class="ruby-string">'sell'</span>  <span class="ruby-operator">&amp;&amp;</span> (<span class="ruby-ivar">@act_user</span>.<span class="ruby-identifier">manage_plan</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">||</span> <span class="ruby-ivar">@act_user</span>.<span class="ruby-identifier">manage_plan</span>.<span class="ruby-identifier">empty?</span>)
                                                                                              <span class="ruby-ivar">@str</span> = <span class="ruby-string">'buy now'</span>
                                                                                      <span class="ruby-keyword">elsif</span> <span class="ruby-ivar">@act_user</span>.<span class="ruby-identifier">user_plan</span>.<span class="ruby-identifier">downcase</span> <span class="ruby-operator">==</span> <span class="ruby-string">'sell'</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@act_user</span>.<span class="ruby-identifier">manage_plan</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@act_user</span>.<span class="ruby-identifier">manage_plan</span> <span class="ruby-operator">!=</span> <span class="ruby-string">''</span>
                                                                                              <span class="ruby-comment">#check sales limit</span>
                                                                                              <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@pro_trans</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@pro_trans</span>.<span class="ruby-identifier">present?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@pro_trans</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span> 
                                                                                                      <span class="ruby-ivar">@str</span> = <span class="ruby-string">'buy now'</span>
                                                                                                      <span class="ruby-comment">#~ if !@pro_trans[0].nil? &amp;&amp; @pro_trans[0].sales_limit.to_i &gt; @pro_trans[0].purchase_limit.to_i                                                                                    </span>
                                                                                                              <span class="ruby-comment">#~ @str = 'buy now'</span>
                                                                                                      <span class="ruby-comment">#~ else</span>
                                                                                                              <span class="ruby-comment">#~ @str ='get info'</span>
                                                                                                      <span class="ruby-comment">#~ end</span>
                                                                                              <span class="ruby-keyword">else</span>                                                                        
                                                                                                      <span class="ruby-keyword">if</span> <span class="ruby-ivar">@act_user</span>.<span class="ruby-identifier">is_partner</span> <span class="ruby-operator">==</span> <span class="ruby-keyword">true</span>
                                                                                                              <span class="ruby-ivar">@str</span> = <span class="ruby-string">'buy now'</span>
                                                                                                      <span class="ruby-keyword">else</span>
                                                                                                              <span class="ruby-ivar">@str</span> = <span class="ruby-string">'get info'</span>
                                                                                                      <span class="ruby-keyword">end</span>
                                                                                              <span class="ruby-keyword">end</span>
                                                                                      <span class="ruby-keyword">elsif</span> <span class="ruby-ivar">@act_user</span>.<span class="ruby-identifier">user_plan</span>.<span class="ruby-identifier">downcase</span> <span class="ruby-operator">==</span> <span class="ruby-string">'curator'</span>
                                                                                              <span class="ruby-ivar">@str</span> = <span class="ruby-string">'get info'</span>
                                                                                      <span class="ruby-keyword">else</span>
                                                                                              <span class="ruby-ivar">@str</span> = <span class="ruby-string">'get info'</span>
                                                                                      <span class="ruby-keyword">end</span>  
                                                                              <span class="ruby-keyword">else</span>
                                                                                      <span class="ruby-ivar">@str</span> = <span class="ruby-string">'get info'</span>
                                                                              <span class="ruby-keyword">end</span>                                                                   
                                                                      <span class="ruby-keyword">end</span>
                                                              <span class="ruby-keyword">end</span>
                                                      <span class="ruby-keyword">end</span>
                                              <span class="ruby-keyword">else</span>
                                                      <span class="ruby-ivar">@str</span> = <span class="ruby-string">'get info'</span>
                                              <span class="ruby-keyword">end</span>                                       
                                      <span class="ruby-keyword">end</span>
                                      
                              <span class="ruby-keyword">elsif</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@activity</span>.<span class="ruby-identifier">created_by</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@activity</span>.<span class="ruby-identifier">created_by!</span>=<span class="ruby-string">''</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@activity</span>.<span class="ruby-identifier">created_by</span>.<span class="ruby-identifier">downcase</span> <span class="ruby-operator">==</span> <span class="ruby-string">'parent'</span>                                   
                                      <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@activity</span>.<span class="ruby-identifier">user_id</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@userid</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@activity</span>.<span class="ruby-identifier">user_id</span>.<span class="ruby-identifier">to_i</span> <span class="ruby-operator">==</span> <span class="ruby-ivar">@userid</span>.<span class="ruby-identifier">to_i</span>
                                              <span class="ruby-ivar">@str</span> = <span class="ruby-string">'edit'</span>
                                      <span class="ruby-keyword">else</span>
                                              <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@schedule</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@schedule</span>.<span class="ruby-identifier">present?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@schedule</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>                                                  
                                                      <span class="ruby-ivar">@str</span> = <span class="ruby-string">'buy now'</span>
                                              <span class="ruby-keyword">else</span>
                                                      <span class="ruby-ivar">@str</span> = <span class="ruby-string">'get info'</span>
                                              <span class="ruby-keyword">end</span>
                                      <span class="ruby-keyword">end</span>                                        
                              <span class="ruby-keyword">else</span>        
                                      <span class="ruby-comment">#parent / provider not </span>
                                      <span class="ruby-ivar">@str</span> = <span class="ruby-string">'buy now'</span>
                              <span class="ruby-keyword">end</span>
                              
                      <span class="ruby-keyword">else</span>
                              <span class="ruby-ivar">@str</span> =<span class="ruby-string">'invalid'</span>
                      <span class="ruby-keyword">end</span>
              <span class="ruby-keyword">else</span>
                      <span class="ruby-ivar">@str</span> = <span class="ruby-string">'invalid'</span>
              <span class="ruby-keyword">end</span>
              <span class="ruby-keyword">return</span> <span class="ruby-ivar">@str</span>
      <span class="ruby-keyword">end</span></pre>
          </div><!-- get_purchase_status-source -->
          
        </div>

        

        
      </div><!-- get_purchase_status-method -->

    
      <div id="method-i-get_total_feature_list_a" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">get_total_feature_list_a</span><span
            class="method-args">(arr,lat,long)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="get_total_feature_list_a-source">
            <pre><span class="ruby-comment"># File app/helpers/landing_helper.rb, line 905</span>
    <span class="ruby-keyword">def</span> <span class="ruby-identifier">get_total_feature_list_a</span>(<span class="ruby-identifier">arr</span>,<span class="ruby-identifier">lat</span>,<span class="ruby-identifier">long</span>)
            <span class="ruby-identifier">featured</span> = <span class="ruby-constant">City</span>.<span class="ruby-identifier">nearby_city_activities</span>(<span class="ruby-identifier">lat</span>,<span class="ruby-identifier">long</span>,<span class="ruby-identifier">session</span>[<span class="ruby-value">:city</span>],<span class="ruby-identifier">cookies</span>[<span class="ruby-value">:feature_page</span>])
            <span class="ruby-comment">#~ @admin_activity=[]</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">featured</span>[<span class="ruby-value">1</span>]
  <span class="ruby-identifier">cookies</span>[<span class="ruby-value">:other_city_page</span>] = <span class="ruby-value">1</span> <span class="ruby-operator">+</span>  <span class="ruby-identifier">cookies</span>[<span class="ruby-value">:other_city_page</span>].<span class="ruby-identifier">to_i</span> <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">cookies</span>[<span class="ruby-value">:other_city_page</span>].<span class="ruby-identifier">nil?</span>
  <span class="ruby-identifier">cookies</span>[<span class="ruby-value">:other_city_page</span>] = <span class="ruby-value">1</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">cookies</span>[<span class="ruby-value">:other_city_page</span>].<span class="ruby-identifier">nil?</span>
  <span class="ruby-comment">#cookies[:other_city_page] = ((cookies[:other_city_page].nil?)  ? 1 : (cookies[:other_city_page].to_i+1))</span>
  <span class="ruby-ivar">@admin_activity</span> = <span class="ruby-identifier">featured</span>[<span class="ruby-value">0</span>].<span class="ruby-identifier">paginate</span>(<span class="ruby-value">:page</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">cookies</span>[<span class="ruby-value">:other_city_page</span>], <span class="ruby-value">:per_page</span> =<span class="ruby-operator">&gt;</span><span class="ruby-value">20</span>)
<span class="ruby-keyword">else</span>
  <span class="ruby-ivar">@admin_activity</span> = <span class="ruby-identifier">featured</span>[<span class="ruby-value">0</span>].<span class="ruby-identifier">paginate</span>(<span class="ruby-value">:page</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">cookies</span>[<span class="ruby-value">:feature_page</span>], <span class="ruby-value">:per_page</span> =<span class="ruby-operator">&gt;</span><span class="ruby-value">20</span>)
<span class="ruby-keyword">end</span>
            <span class="ruby-ivar">@admin_activity</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">actv</span><span class="ruby-operator">|</span>
                    <span class="ruby-keyword">if</span> <span class="ruby-identifier">actv</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">to_s</span><span class="ruby-operator">==</span><span class="ruby-string">'Activity'</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">actv</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">to_s</span><span class="ruby-operator">==</span><span class="ruby-string">'Array'</span>
    <span class="ruby-identifier">activity</span> = (<span class="ruby-identifier">actv</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">to_s</span><span class="ruby-operator">==</span><span class="ruby-string">'Activity'</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">actv</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">actv</span>[<span class="ruby-value">0</span>]
    <span class="ruby-identifier">mod_mode</span> = (<span class="ruby-identifier">actv</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">to_s</span><span class="ruby-operator">==</span><span class="ruby-string">'Activity'</span>) <span class="ruby-operator">?</span> <span class="ruby-string">'activity'</span> <span class="ruby-operator">:</span> <span class="ruby-string">'weekend'</span>
    <span class="ruby-ivar">@schedule</span> = <span class="ruby-constant">ActivitySchedule</span>.<span class="ruby-identifier">where</span>(<span class="ruby-string">&quot;activity_id = ?&quot;</span>,<span class="ruby-identifier">activity</span>.<span class="ruby-identifier">activity_id</span>).<span class="ruby-identifier">last</span>
    <span class="ruby-comment">#Activity.schedule_feature_list(session[:date],event,arr) if !event.nil?</span>
    <span class="ruby-identifier">arr</span> <span class="ruby-operator">&lt;&lt;</span> {<span class="ruby-value">:model_mode=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">mod_mode</span>, <span class="ruby-value">:discount_eligible=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">activity</span>.<span class="ruby-identifier">discount_eligible</span>, <span class="ruby-value">:schedule</span> =<span class="ruby-operator">&gt;</span><span class="ruby-ivar">@schedule</span>, <span class="ruby-value">:activity=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">activity</span>, <span class="ruby-value">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">activity</span>.<span class="ruby-identifier">activity_id</span>, <span class="ruby-value">:leader=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">activity</span>.<span class="ruby-identifier">leader</span>, <span class="ruby-value">:skill_level=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">activity</span>.<span class="ruby-identifier">skill_level</span>, <span class="ruby-value">:schedule_mode=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">activity</span>.<span class="ruby-identifier">schedule_mode</span>, <span class="ruby-value">:filter_id=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">activity</span>.<span class="ruby-identifier">filter_id</span>, <span class="ruby-value">:min_age_range=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">activity</span>.<span class="ruby-identifier">min_age_range</span>, <span class="ruby-value">:max_age_range=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">activity</span>.<span class="ruby-identifier">max_age_range</span>, <span class="ruby-value">:price_type</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">activity</span>.<span class="ruby-identifier">price_type</span>, <span class="ruby-value">:city</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">activity</span>.<span class="ruby-identifier">city</span>, <span class="ruby-value">:activity_name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">activity</span>.<span class="ruby-identifier">activity_name</span>, <span class="ruby-value">:description</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">activity</span>.<span class="ruby-identifier">description</span>,<span class="ruby-value">:avatar=</span><span class="ruby-operator">&gt;</span> <span class="ruby-identifier">activity</span>.<span class="ruby-identifier">avatar</span>,<span class="ruby-value">:avatar_file_name=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">activity</span>.<span class="ruby-identifier">avatar_file_name</span>,<span class="ruby-value">:category=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">activity</span>.<span class="ruby-identifier">category</span>,<span class="ruby-value">:sub_category=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">activity</span>.<span class="ruby-identifier">sub_category</span>,<span class="ruby-value">:price=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">activity</span>.<span class="ruby-identifier">price</span>,<span class="ruby-value">:address_1=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">activity</span>.<span class="ruby-identifier">address_1</span>,<span class="ruby-value">:address_2=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">activity</span>.<span class="ruby-identifier">address_2</span>,<span class="ruby-value">:age_range=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">activity</span>.<span class="ruby-identifier">age_range</span>,<span class="ruby-value">:no_participants=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">activity</span>.<span class="ruby-identifier">no_participants</span>,<span class="ruby-value">:created_by=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">activity</span>.<span class="ruby-identifier">created_by</span>,<span class="ruby-value">:user_id=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">activity</span>.<span class="ruby-identifier">user_id</span>, <span class="ruby-value">:purchase_url=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">activity</span>.<span class="ruby-identifier">purchase_url</span>}
                    <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">arr</span> <span class="ruby-operator">&lt;&lt;</span> {<span class="ruby-value">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">actv</span>.<span class="ruby-identifier">user_id</span>,<span class="ruby-value">:model_mode=</span><span class="ruby-operator">&gt;</span><span class="ruby-string">'user'</span>}
                    <span class="ruby-keyword">end</span>
            <span class="ruby-keyword">end</span> <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@admin_activity</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@admin_activity</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
            <span class="ruby-ivar">@total_pages</span> = <span class="ruby-ivar">@admin_activity</span>.<span class="ruby-identifier">total_pages</span>
            <span class="ruby-ivar">@current_page</span> = (<span class="ruby-identifier">cookies</span>[<span class="ruby-value">:other_city_page</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">cookies</span>[<span class="ruby-value">:other_city_page</span>].<span class="ruby-identifier">present?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">cookies</span>[<span class="ruby-value">:other_city_page</span>].<span class="ruby-identifier">nil?</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">cookies</span>[<span class="ruby-value">:other_city_page</span>] <span class="ruby-operator">:</span> <span class="ruby-identifier">cookies</span>[<span class="ruby-value">:feature_page</span>]
            <span class="ruby-keyword">return</span> <span class="ruby-identifier">arr</span>
    <span class="ruby-keyword">end</span></pre>
          </div><!-- get_total_feature_list_a-source -->
          
        </div>

        

        
      </div><!-- get_total_feature_list_a-method -->

    
      <div id="method-i-get_upcoming_activities" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">get_upcoming_activities</span><span
            class="method-args">(before_check)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>exprire activity removed</p>
          

          
          <div class="method-source-code" id="get_upcoming_activities-source">
            <pre><span class="ruby-comment"># File app/helpers/landing_helper.rb, line 4</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">get_upcoming_activities</span>(<span class="ruby-identifier">before_check</span>)
  <span class="ruby-identifier">before_check</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">af</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">af</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-operator">==</span> <span class="ruby-string">'MessageThread'</span>
      <span class="ruby-ivar">@all_act</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">af</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">newact</span>=<span class="ruby-constant">ActivitySchedule</span>.<span class="ruby-identifier">where</span>(<span class="ruby-string">&quot;activity_id = ?&quot;</span>,<span class="ruby-identifier">af</span>.<span class="ruby-identifier">activity_id</span>).<span class="ruby-identifier">last</span>
      <span class="ruby-ivar">@check_newact</span>=<span class="ruby-identifier">newact</span>.<span class="ruby-identifier">expiration_date</span><span class="ruby-operator">&gt;=</span><span class="ruby-constant">Date</span>.<span class="ruby-identifier">today</span>  <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">newact</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">newact</span>.<span class="ruby-identifier">expiration_date</span>.<span class="ruby-identifier">nil?</span>
      <span class="ruby-ivar">@all_act</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">newact</span> <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">newact</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@check_newact</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@check_newact</span>.<span class="ruby-identifier">present?</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span> <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">before_check</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">before_check</span>.<span class="ruby-identifier">present?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">before_check</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
      
  <span class="ruby-ivar">@all_act</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">al</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">al</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-operator">==</span> <span class="ruby-string">'MessageThread'</span>
      <span class="ruby-ivar">@act_free</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">al</span>
    <span class="ruby-keyword">elsif</span> <span class="ruby-operator">!</span><span class="ruby-identifier">al</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">al</span>.<span class="ruby-identifier">activity_id!</span>=<span class="ruby-string">''</span>
      <span class="ruby-identifier">id</span>=<span class="ruby-identifier">al</span>.<span class="ruby-identifier">activity_id</span>
      <span class="ruby-identifier">act</span>=<span class="ruby-constant">Activity</span>.<span class="ruby-identifier">where</span>(<span class="ruby-string">&quot;activity_id = ?&quot;</span>,<span class="ruby-identifier">id</span>).<span class="ruby-identifier">last</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">id!</span>=<span class="ruby-string">''</span>
      <span class="ruby-ivar">@act_free</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">act</span> <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">act</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">act</span>.<span class="ruby-identifier">present?</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span> <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@all_act</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@all_act</span>.<span class="ruby-identifier">present?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@all_act</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
  <span class="ruby-keyword">return</span> <span class="ruby-ivar">@act_free</span> <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@act_free</span>.<span class="ruby-identifier">nil?</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- get_upcoming_activities-source -->
          
        </div>

        

        
      </div><!-- get_upcoming_activities-method -->

    
      <div id="method-i-getusername" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">getusername</span><span
            class="method-args">(uid)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="getusername-source">
            <pre><span class="ruby-comment"># File app/helpers/landing_helper.rb, line 933</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">getusername</span>(<span class="ruby-identifier">uid</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">uid</span>
          <span class="ruby-ivar">@user</span> = <span class="ruby-constant">User</span>.<span class="ruby-identifier">find_by_user_id</span>(<span class="ruby-identifier">uid</span>)
          <span class="ruby-identifier">name</span> = <span class="ruby-ivar">@user</span>.<span class="ruby-identifier">user_name</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@user</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@user</span>.<span class="ruby-identifier">user_name</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">return</span> <span class="ruby-identifier">name</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- getusername-source -->
          
        </div>

        

        
      </div><!-- getusername-method -->

    
      <div id="method-i-landing_feature_activity" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">landing_feature_activity</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>landing page feature row code</p>
          

          
          <div class="method-source-code" id="landing_feature_activity-source">
            <pre><span class="ruby-comment"># File app/helpers/landing_helper.rb, line 785</span>
        <span class="ruby-keyword">def</span> <span class="ruby-identifier">landing_feature_activity</span>
                <span class="ruby-comment">#cookies.delete :feature_page #to avoid duplicate - delete cookies for first time page load</span>
                <span class="ruby-comment">#cookies.delete :other_city_page #to avoid duplicate - delete cookies for first time page load</span>
   
    <span class="ruby-identifier">params</span>[<span class="ruby-value">:mode</span>]=<span class="ruby-string">'parent'</span>  <span class="ruby-comment">#dont remove this</span>
    <span class="ruby-comment">#      if !session['ip_location'].nil?</span>
    <span class="ruby-comment">#        ip_location = session['ip_location']</span>
    <span class="ruby-comment">#      else</span>
    <span class="ruby-comment">#        ip_location = {'latitude'=&gt;'37.9100783','longitude'=&gt;'-122.0651819', 'city' =&gt; 'Walnut Creek'}</span>
    <span class="ruby-comment">#      end</span>
    <span class="ruby-comment">#      if (cookies[:selected_city].nil?)</span>
    <span class="ruby-comment">#        if(ip_location.present? &amp;&amp; ip_location &amp;&amp; !ip_location.nil? &amp;&amp; !ip_location['city'].nil? &amp;&amp; ip_location['city'].present? &amp;&amp; ip_location['city']!=&quot;&quot; )</span>
    <span class="ruby-comment">#          cookies[:city_new_usr] = ip_location['city'].titlecase  if(ip_location.present? &amp;&amp; ip_location &amp;&amp; !ip_location.nil? &amp;&amp; !ip_location['city'].nil?)</span>
    <span class="ruby-comment">#        else #default values</span>
    <span class="ruby-comment">#          cookies[:city_new_usr] = 'Walnut Creek'</span>
    <span class="ruby-comment">#        end</span>
    <span class="ruby-comment">#        @city_value = request.url.split('/').last</span>
    <span class="ruby-comment">#        if (request.url.include? &quot;=&quot;)</span>
    <span class="ruby-comment">#          if (@city_value.include? &quot;?&quot;)</span>
    <span class="ruby-comment">#            cookies[:city_new_usr] = 'Walnut Creek'</span>
    <span class="ruby-comment">#          else</span>
    <span class="ruby-comment">#            cookies[:city_new_usr] = @city_value.titleize</span>
    <span class="ruby-comment">#          end</span>
    <span class="ruby-comment">#        else</span>
    <span class="ruby-comment">#          cookies[:city_new_usr] = 'Walnut Creek'</span>
    <span class="ruby-comment">#        end</span>
    <span class="ruby-comment">#      else #city selected values</span>
    <span class="ruby-comment">#        cookies[:city_new_usr] = cookies[:selected_city]</span>
    <span class="ruby-comment">#      end</span>
    
    <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">session</span>[<span class="ruby-string">'ip_location'</span>].<span class="ruby-identifier">nil?</span>
      <span class="ruby-identifier">ip_location</span> = <span class="ruby-identifier">session</span>[<span class="ruby-string">'ip_location'</span>]
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">ip_location</span> = {<span class="ruby-string">'latitude'</span>=<span class="ruby-operator">&gt;</span><span class="ruby-string">'37.9100783'</span>,<span class="ruby-string">'longitude'</span>=<span class="ruby-operator">&gt;</span><span class="ruby-string">'-122.0651819'</span>, <span class="ruby-string">'city'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'Walnut Creek'</span>}
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">if</span> (<span class="ruby-identifier">cookies</span>[<span class="ruby-value">:selected_city</span>].<span class="ruby-identifier">nil?</span>)
      <span class="ruby-keyword">if</span>(<span class="ruby-identifier">ip_location</span>.<span class="ruby-identifier">present?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">ip_location</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">ip_location</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">ip_location</span>[<span class="ruby-string">'city'</span>].<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">ip_location</span>[<span class="ruby-string">'city'</span>].<span class="ruby-identifier">present?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">ip_location</span>[<span class="ruby-string">'city'</span>]<span class="ruby-operator">!=</span><span class="ruby-string">&quot;&quot;</span> )
        <span class="ruby-identifier">cookies</span>[<span class="ruby-value">:city_new_usr</span>] = <span class="ruby-identifier">ip_location</span>[<span class="ruby-string">'city'</span>].<span class="ruby-identifier">titlecase</span>  <span class="ruby-keyword">if</span>(<span class="ruby-identifier">ip_location</span>.<span class="ruby-identifier">present?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">ip_location</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">ip_location</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">ip_location</span>[<span class="ruby-string">'city'</span>].<span class="ruby-identifier">nil?</span>)
      <span class="ruby-keyword">else</span> <span class="ruby-comment">#default values</span>
        <span class="ruby-identifier">cookies</span>[<span class="ruby-value">:city_new_usr</span>] = <span class="ruby-string">'Walnut Creek'</span>
      <span class="ruby-keyword">end</span>
      <span class="ruby-ivar">@city_value</span> = <span class="ruby-identifier">request</span>.<span class="ruby-identifier">url</span>.<span class="ruby-identifier">split</span>(<span class="ruby-string">'/'</span>).<span class="ruby-identifier">last</span>
      <span class="ruby-keyword">if</span> (<span class="ruby-identifier">request</span>.<span class="ruby-identifier">url</span>.<span class="ruby-identifier">include?</span> <span class="ruby-string">&quot;=&quot;</span>)
        <span class="ruby-keyword">if</span> (<span class="ruby-ivar">@city_value</span>.<span class="ruby-identifier">include?</span> <span class="ruby-string">&quot;?&quot;</span>)
          <span class="ruby-identifier">cookies</span>[<span class="ruby-value">:city_new_usr</span>] = <span class="ruby-string">'Walnut Creek'</span>
        <span class="ruby-keyword">else</span>
          <span class="ruby-identifier">cookies</span>[<span class="ruby-value">:city_new_usr</span>] = <span class="ruby-ivar">@city_value</span>.<span class="ruby-identifier">titleize</span>
        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">cookies</span>[<span class="ruby-value">:city_new_usr</span>] = <span class="ruby-string">'Walnut Creek'</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">else</span> <span class="ruby-comment">#city selected values</span>
      <span class="ruby-identifier">cookies</span>[<span class="ruby-value">:city_new_usr</span>] = <span class="ruby-identifier">cookies</span>[<span class="ruby-value">:selected_city</span>]
    <span class="ruby-keyword">end</span>
    
    <span class="ruby-identifier">session</span>[<span class="ruby-value">:city</span>] = <span class="ruby-identifier">cookies</span>[<span class="ruby-value">:search_city</span>]
    <span class="ruby-identifier">session</span>[<span class="ruby-value">:city</span>] = <span class="ruby-string">&quot;Walnut Creek&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">session</span>[<span class="ruby-value">:city</span>].<span class="ruby-identifier">nil?</span>
    <span class="ruby-identifier">session</span>[<span class="ruby-value">:cat_zc</span>]=<span class="ruby-string">&quot;date&quot;</span>
    <span class="ruby-identifier">session</span>[<span class="ruby-value">:date</span>] = <span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>.<span class="ruby-identifier">strftime</span>(<span class="ruby-string">&quot;%Y-%m-%d&quot;</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">session</span>[<span class="ruby-value">:date</span>].<span class="ruby-identifier">nil?</span>
     
    <span class="ruby-ivar">@provider_activites</span> = []
    <span class="ruby-ivar">@follow_parent_user</span> = []
    <span class="ruby-ivar">@follow_provider_user</span> = []
    <span class="ruby-ivar">@category</span> = []
    <span class="ruby-ivar">@sub_category</span> = []
    <span class="ruby-ivar">@checck</span>  = []
    <span class="ruby-ivar">@jump_to_act</span> =[]
    <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">current_user</span>.<span class="ruby-identifier">nil?</span>
      <span class="ruby-identifier">user_id</span> = <span class="ruby-identifier">current_user</span>.<span class="ruby-identifier">user_id</span>
      <span class="ruby-ivar">@fam_post</span> = <span class="ruby-constant">FamNetworkRow</span>.<span class="ruby-identifier">where</span>(<span class="ruby-node">&quot;user_id=#{user_id}&quot;</span>).<span class="ruby-identifier">map</span>(&amp;<span class="ruby-value">:contact_group_id</span>).<span class="ruby-identifier">uniq</span>
      <span class="ruby-ivar">@provider_activites_selected</span> = []
      <span class="ruby-ivar">@provider_activites_combined</span> = []
      <span class="ruby-identifier">categories_selected</span> =  <span class="ruby-constant">ActivityRow</span>.<span class="ruby-identifier">select</span>(<span class="ruby-string">&quot;Distinct(act.category_id)&quot;</span>).<span class="ruby-identifier">joins</span>(<span class="ruby-string">&quot;left join activity_subcategories as act on act.subcateg_id = activity_rows.subcateg_id&quot;</span>).<span class="ruby-identifier">where</span>(<span class="ruby-string">&quot;activity_rows.user_id = ?&quot;</span>,<span class="ruby-identifier">cookies</span>[<span class="ruby-value">:uid_usr</span>]).<span class="ruby-identifier">group</span>(<span class="ruby-string">&quot;act.category_id&quot;</span>).<span class="ruby-identifier">map</span>(&amp;<span class="ruby-value">:category_id</span>)
      <span class="ruby-ivar">@provider_activites_selected</span> = <span class="ruby-constant">ActivityCategory</span>.<span class="ruby-identifier">select</span>(<span class="ruby-string">&quot;Distinct(category_name)&quot;</span>).<span class="ruby-identifier">where</span>(<span class="ruby-value">:category_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">categories_selected</span>).<span class="ruby-identifier">map</span>(&amp;<span class="ruby-value">:category_name</span>)
      <span class="ruby-comment">#user selected activities</span>
      <span class="ruby-ivar">@provider_activites_combined</span><span class="ruby-operator">&lt;&lt;</span><span class="ruby-ivar">@provider_activites_selected</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@provider_activites_selected</span>
      <span class="ruby-comment">#make all the category to single array</span>
      <span class="ruby-ivar">@provider_activites_get</span> = <span class="ruby-ivar">@provider_activites_combined</span>.<span class="ruby-identifier">flatten</span>
      <span class="ruby-ivar">@provider_activites</span> = <span class="ruby-ivar">@provider_activites_get</span>.<span class="ruby-identifier">uniq</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">x</span><span class="ruby-operator">|</span> <span class="ruby-identifier">x</span>}
      <span class="ruby-comment">#provider activities based on the user selection row with default row added</span>
       
      <span class="ruby-ivar">@follow_parent_user</span> = <span class="ruby-constant">UserRow</span>.<span class="ruby-identifier">where</span>(<span class="ruby-node">&quot;user_id=#{user_id} and lower(user_type)='u'&quot;</span>).<span class="ruby-identifier">map</span>(&amp;<span class="ruby-value">:row_user_id</span>)
      <span class="ruby-ivar">@follow_provider_user</span> = <span class="ruby-constant">UserRow</span>.<span class="ruby-identifier">where</span>(<span class="ruby-node">&quot;user_id=#{user_id} and lower(user_type)='p'&quot;</span>).<span class="ruby-identifier">map</span>(&amp;<span class="ruby-value">:row_user_id</span>)
      <span class="ruby-ivar">@category</span> =  <span class="ruby-constant">ActivityRow</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:user_id=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">user_id</span>).<span class="ruby-identifier">map</span>(&amp;<span class="ruby-value">:subcateg_id</span>)
      <span class="ruby-ivar">@sub_category</span> = <span class="ruby-constant">ActivitySubcategory</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:subcateg_id=</span><span class="ruby-operator">&gt;</span><span class="ruby-ivar">@category</span> ).<span class="ruby-identifier">map</span>(&amp;<span class="ruby-value">:subcateg_name</span>)
      <span class="ruby-ivar">@checck</span> = <span class="ruby-constant">ActivityRow</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">:all</span>,<span class="ruby-value">:conditions=</span><span class="ruby-operator">&gt;</span>[<span class="ruby-string">&quot;user_id = ? &quot;</span>,<span class="ruby-identifier">user_id</span>],<span class="ruby-value">:select</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;row_type&quot;</span>)
      <span class="ruby-identifier">session</span>[<span class="ruby-value">:category_row</span>] = <span class="ruby-string">&quot;&quot;</span>
      <span class="ruby-identifier">cookies</span>[<span class="ruby-value">:subct_id</span>] = <span class="ruby-string">&quot;&quot;</span>
      <span class="ruby-identifier">session</span>[<span class="ruby-value">:before_cat</span>] = <span class="ruby-string">&quot;&quot;</span>
      <span class="ruby-identifier">session</span>[<span class="ruby-value">:before_prov</span>] = <span class="ruby-string">&quot;&quot;</span>
      <span class="ruby-identifier">session</span>[<span class="ruby-value">:provider_row</span>] = <span class="ruby-string">&quot;&quot;</span>
      <span class="ruby-ivar">@provider_activites_check</span> =[]
      <span class="ruby-ivar">@checck</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">s</span><span class="ruby-operator">|</span> <span class="ruby-ivar">@provider_activites_check</span><span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">s</span>.<span class="ruby-identifier">row_type</span> }
    <span class="ruby-keyword">else</span>
      
        
    <span class="ruby-keyword">end</span> <span class="ruby-comment">#current user end</span>
<span class="ruby-comment">#    if params[:page].nil?</span>
<span class="ruby-comment">#      cookies[:feature_page] = 1</span>
<span class="ruby-comment">#      cookies.delete :other_city_page</span>
<span class="ruby-comment">#    end</span>
<span class="ruby-comment">#    arr = []</span>
    <span class="ruby-comment">#~ get_total_feature_list(arr)</span>
<span class="ruby-comment">#    get_total_feature_list(arr,ip_location['latitude'],ip_location['longitude']) if !ip_location.nil? &amp;&amp; ip_location!='' &amp;&amp; ip_location.present? &amp;&amp; !ip_location['latitude'].nil? &amp;&amp; !ip_location['longitude'].nil? &amp;&amp; ip_location['latitude']!='' &amp;&amp; ip_location['longitude']!=''</span>
<span class="ruby-comment">#    featured = arr.uniq{|x| x[:id]}</span>
<span class="ruby-comment">#    if featured.length !=0 &amp;&amp; featured.length &lt;8</span>
<span class="ruby-comment">#      cookies[:feature_page] = 1 + cookies[:feature_page].to_i</span>
<span class="ruby-comment">#      #~ get_total_feature_list(arr)</span>
<span class="ruby-comment">#      get_total_feature_list(arr,ip_location['latitude'],ip_location['longitude']) if !ip_location.nil? &amp;&amp; ip_location!='' &amp;&amp; ip_location.present? &amp;&amp; !ip_location['latitude'].nil? &amp;&amp; !ip_location['longitude'].nil? &amp;&amp; ip_location['latitude']!='' &amp;&amp; ip_location['longitude']!=''</span>
<span class="ruby-comment">#    end</span>
<span class="ruby-comment">#    @activity_featured = arr.uniq{|x| x[:id]}</span>
   <span class="ruby-ivar">@accordion</span> = <span class="ruby-constant">Activity</span>.<span class="ruby-identifier">order</span>(<span class="ruby-string">&quot;category Asc&quot;</span>).<span class="ruby-identifier">find</span>(<span class="ruby-value">:all</span>,<span class="ruby-value">:select</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;DISTINCT trim(category) as category&quot;</span>,<span class="ruby-value">:conditions=</span><span class="ruby-operator">&gt;</span>[<span class="ruby-string">&quot;lower(category)!=?&quot;</span>,<span class="ruby-string">'default'</span>])
<span class="ruby-comment">#    @blog_value = []</span>
<span class="ruby-comment">#    url = URI.parse(&quot;http://blog.famtivity.com/?feed=rss2&quot;)</span>
<span class="ruby-comment">#    req = Net::HTTP.new(url.host, url.port)</span>

    

        <span class="ruby-keyword">end</span></pre>
          </div><!-- landing_feature_activity-source -->
          
        </div>

        

        
      </div><!-- landing_feature_activity-method -->

    
      <div id="method-i-market_and_sell_users" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">market_and_sell_users</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="market_and_sell_users-source">
            <pre><span class="ruby-comment"># File app/helpers/landing_helper.rb, line 132</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">market_and_sell_users</span> <span class="ruby-comment">#In Famrivity user report page</span>
  <span class="ruby-comment">#get the sell users list based on the market and sell provider</span>
  <span class="ruby-ivar">@mkt_sell_users</span> = <span class="ruby-constant">User</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-string">&quot;select distinct user_id from users where lower(user_type)='p' and lower(user_plan)='sell' and lower(manage_plan)='market_sell' and account_active_status=true and is_partner=false&quot;</span>).<span class="ruby-identifier">map</span>(&amp;<span class="ruby-value">:user_id</span>).<span class="ruby-identifier">uniq</span>
  <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@mkt_sell_users</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@mkt_sell_users</span><span class="ruby-operator">!=</span><span class="ruby-string">&quot;&quot;</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@mkt_sell_users</span>.<span class="ruby-identifier">present?</span>
    <span class="ruby-ivar">@mkt_sell_users_tot</span> = <span class="ruby-ivar">@mkt_sell_users</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-ivar">@mkt_sell_users_tot</span> = <span class="ruby-value">0</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">return</span> <span class="ruby-ivar">@mkt_sell_users_tot</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- market_and_sell_users-source -->
          
        </div>

        

        
      </div><!-- market_and_sell_users-method -->

    
      <div id="method-i-market_and_sell_users_withdate" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">market_and_sell_users_withdate</span><span
            class="method-args">(sdate,edate)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="market_and_sell_users_withdate-source">
            <pre><span class="ruby-comment"># File app/helpers/landing_helper.rb, line 143</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">market_and_sell_users_withdate</span>(<span class="ruby-identifier">sdate</span>,<span class="ruby-identifier">edate</span>) <span class="ruby-comment">#In Famrivity user report page</span>
  <span class="ruby-comment">#get the sell users list based on the market and sell provider</span>
  <span class="ruby-ivar">@mkt_sell_users</span> = <span class="ruby-constant">User</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-node">&quot;select distinct user_id from users where lower(user_type)='p' and lower(user_plan)='sell' and lower(manage_plan)='market_sell' and account_active_status=true and is_partner=false and date(user_created_date) between date('#{sdate}') and date('#{edate}')&quot;</span>).<span class="ruby-identifier">map</span>(&amp;<span class="ruby-value">:user_id</span>).<span class="ruby-identifier">uniq</span>
  <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@mkt_sell_users</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@mkt_sell_users</span><span class="ruby-operator">!=</span><span class="ruby-string">&quot;&quot;</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@mkt_sell_users</span>.<span class="ruby-identifier">present?</span>
    <span class="ruby-ivar">@mkt_sell_users_tot</span> = <span class="ruby-ivar">@mkt_sell_users</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-ivar">@mkt_sell_users_tot</span> = <span class="ruby-value">0</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">return</span> <span class="ruby-ivar">@mkt_sell_users_tot</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- market_and_sell_users_withdate-source -->
          
        </div>

        

        
      </div><!-- market_and_sell_users_withdate-method -->

    
      <div id="method-i-marketsell_and_manage_users" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">marketsell_and_manage_users</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="marketsell_and_manage_users-source">
            <pre><span class="ruby-comment"># File app/helpers/landing_helper.rb, line 154</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">marketsell_and_manage_users</span> <span class="ruby-comment">#In Famrivity user report page</span>
  <span class="ruby-comment">#get the sell users list based on the market and sell provider</span>
  <span class="ruby-ivar">@mktsell_mge_users</span> = <span class="ruby-constant">User</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-string">&quot;select distinct user_id from users where lower(user_type)='p' and lower(user_plan)='sell' and lower(manage_plan)='market_sell_manage' and is_partner=false and account_active_status=true&quot;</span>).<span class="ruby-identifier">map</span>(&amp;<span class="ruby-value">:user_id</span>).<span class="ruby-identifier">uniq</span>
  <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@mktsell_mge_users</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@mktsell_mge_users</span><span class="ruby-operator">!=</span><span class="ruby-string">&quot;&quot;</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@mktsell_mge_users</span>.<span class="ruby-identifier">present?</span>
    <span class="ruby-ivar">@mktsell_mge_users_tot</span> = <span class="ruby-ivar">@mktsell_mge_users</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-ivar">@mktsell_mge_users_tot</span> = <span class="ruby-value">0</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">return</span> <span class="ruby-ivar">@mktsell_mge_users_tot</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- marketsell_and_manage_users-source -->
          
        </div>

        

        
      </div><!-- marketsell_and_manage_users-method -->

    
      <div id="method-i-marketsell_and_manage_users_withdate" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">marketsell_and_manage_users_withdate</span><span
            class="method-args">(sdate,edate)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="marketsell_and_manage_users_withdate-source">
            <pre><span class="ruby-comment"># File app/helpers/landing_helper.rb, line 165</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">marketsell_and_manage_users_withdate</span>(<span class="ruby-identifier">sdate</span>,<span class="ruby-identifier">edate</span>) <span class="ruby-comment">#In Famrivity user report page</span>
  <span class="ruby-comment">#get the sell users list based on the market and sell provider</span>
  <span class="ruby-ivar">@mktsell_mge_users</span> = <span class="ruby-constant">User</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-node">&quot;select distinct user_id from users where lower(user_type)='p' and lower(user_plan)='sell' and lower(manage_plan)='market_sell_manage' and is_partner=false and account_active_status=true and date(user_created_date) between date('#{sdate}') and date('#{edate}')&quot;</span>).<span class="ruby-identifier">map</span>(&amp;<span class="ruby-value">:user_id</span>).<span class="ruby-identifier">uniq</span>
  <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@mktsell_mge_users</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@mktsell_mge_users</span><span class="ruby-operator">!=</span><span class="ruby-string">&quot;&quot;</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@mktsell_mge_users</span>.<span class="ruby-identifier">present?</span>
    <span class="ruby-ivar">@mktsell_mge_users_tot</span> = <span class="ruby-ivar">@mktsell_mge_users</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-ivar">@mktsell_mge_users_tot</span> = <span class="ruby-value">0</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">return</span> <span class="ruby-ivar">@mktsell_mge_users_tot</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- marketsell_and_manage_users_withdate-source -->
          
        </div>

        

        
      </div><!-- marketsell_and_manage_users_withdate-method -->

    
      <div id="method-i-marketsell_manageplus_users" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">marketsell_manageplus_users</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="marketsell_manageplus_users-source">
            <pre><span class="ruby-comment"># File app/helpers/landing_helper.rb, line 176</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">marketsell_manageplus_users</span> <span class="ruby-comment">#In Famrivity user report page</span>
  <span class="ruby-comment">#get the sell users list based on the market and sell provider</span>
  <span class="ruby-ivar">@mktsell_mgeplus_users</span> = <span class="ruby-constant">User</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-string">&quot;select distinct user_id from users where lower(user_type)='p' and lower(user_plan)='sell' and is_partner=false and lower(manage_plan)='market_sell_manage_plus' and account_active_status=true&quot;</span>).<span class="ruby-identifier">map</span>(&amp;<span class="ruby-value">:user_id</span>).<span class="ruby-identifier">uniq</span>
  <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@mktsell_mgeplus_users</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@mktsell_mgeplus_users</span><span class="ruby-operator">!=</span><span class="ruby-string">&quot;&quot;</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@mktsell_mgeplus_users</span>.<span class="ruby-identifier">present?</span>
    <span class="ruby-ivar">@mktsell_mgeplus_users_tot</span> = <span class="ruby-ivar">@mktsell_mgeplus_users</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-ivar">@mktsell_mgeplus_users_tot</span> = <span class="ruby-value">0</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">return</span> <span class="ruby-ivar">@mktsell_mgeplus_users_tot</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- marketsell_manageplus_users-source -->
          
        </div>

        

        
      </div><!-- marketsell_manageplus_users-method -->

    
      <div id="method-i-marketsell_manageplus_users_withdate" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">marketsell_manageplus_users_withdate</span><span
            class="method-args">(sdate,edate)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="marketsell_manageplus_users_withdate-source">
            <pre><span class="ruby-comment"># File app/helpers/landing_helper.rb, line 187</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">marketsell_manageplus_users_withdate</span>(<span class="ruby-identifier">sdate</span>,<span class="ruby-identifier">edate</span>) <span class="ruby-comment">#In Famrivity user report page</span>
  <span class="ruby-comment">#get the sell users list based on the market and sell provider</span>
  <span class="ruby-ivar">@mktsell_mgeplus_users</span> = <span class="ruby-constant">User</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-node">&quot;select distinct user_id from users where lower(user_type)='p' and lower(user_plan)='sell' and is_partner=false and lower(manage_plan)='market_sell_manage_plus' and account_active_status=true and date(user_created_date) between date('#{sdate}') and date('#{edate}')&quot;</span>).<span class="ruby-identifier">map</span>(&amp;<span class="ruby-value">:user_id</span>).<span class="ruby-identifier">uniq</span>
  <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@mktsell_mgeplus_users</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@mktsell_mgeplus_users</span><span class="ruby-operator">!=</span><span class="ruby-string">&quot;&quot;</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@mktsell_mgeplus_users</span>.<span class="ruby-identifier">present?</span>
    <span class="ruby-ivar">@mktsell_mgeplus_users_tot</span> = <span class="ruby-ivar">@mktsell_mgeplus_users</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-ivar">@mktsell_mgeplus_users_tot</span> = <span class="ruby-value">0</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">return</span> <span class="ruby-ivar">@mktsell_mgeplus_users_tot</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- marketsell_manageplus_users_withdate-source -->
          
        </div>

        

        
      </div><!-- marketsell_manageplus_users_withdate-method -->

    
      <div id="method-i-parent_active_usr" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">parent_active_usr</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="parent_active_usr-source">
            <pre><span class="ruby-comment"># File app/helpers/landing_helper.rb, line 386</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">parent_active_usr</span> <span class="ruby-comment">#In Famrivity user report page</span>
  <span class="ruby-comment">#get the users list for parent</span>
  <span class="ruby-ivar">@prt_act</span> = <span class="ruby-constant">User</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-string">&quot;select distinct user_id from users where lower(user_type)='u' and account_active_status=true&quot;</span>).<span class="ruby-identifier">map</span>(&amp;<span class="ruby-value">:user_id</span>).<span class="ruby-identifier">uniq</span>
  <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@prt_act</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@prt_act</span><span class="ruby-operator">!=</span><span class="ruby-string">&quot;&quot;</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@prt_act</span>.<span class="ruby-identifier">present?</span>
    <span class="ruby-ivar">@prt_act_tot</span> = <span class="ruby-ivar">@prt_act</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-ivar">@prt_act_tot</span> = <span class="ruby-value">0</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">return</span> <span class="ruby-ivar">@prt_act_tot</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- parent_active_usr-source -->
          
        </div>

        

        
      </div><!-- parent_active_usr-method -->

    
      <div id="method-i-parent_active_usr_withdate" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">parent_active_usr_withdate</span><span
            class="method-args">(sdate,edate)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>parent active user with dates</p>
          

          
          <div class="method-source-code" id="parent_active_usr_withdate-source">
            <pre><span class="ruby-comment"># File app/helpers/landing_helper.rb, line 398</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">parent_active_usr_withdate</span>(<span class="ruby-identifier">sdate</span>,<span class="ruby-identifier">edate</span>) <span class="ruby-comment">#In Famrivity user report page</span>
  <span class="ruby-comment">#get the users list for parent</span>
  <span class="ruby-ivar">@prt_act</span> = <span class="ruby-constant">User</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-node">&quot;select distinct user_id from users where lower(user_type)='u' and account_active_status=true and date(user_created_date) between date('#{sdate}') and date('#{edate}')&quot;</span>).<span class="ruby-identifier">map</span>(&amp;<span class="ruby-value">:user_id</span>).<span class="ruby-identifier">uniq</span>
  <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@prt_act</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@prt_act</span><span class="ruby-operator">!=</span><span class="ruby-string">&quot;&quot;</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@prt_act</span>.<span class="ruby-identifier">present?</span>
    <span class="ruby-ivar">@prt_act_tot</span> = <span class="ruby-ivar">@prt_act</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-ivar">@prt_act_tot</span> = <span class="ruby-value">0</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">return</span> <span class="ruby-ivar">@prt_act_tot</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- parent_active_usr_withdate-source -->
          
        </div>

        

        
      </div><!-- parent_active_usr_withdate-method -->

    
      <div id="method-i-parent_free" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">parent_free</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="parent_free-source">
            <pre><span class="ruby-comment"># File app/helpers/landing_helper.rb, line 353</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">parent_free</span> <span class="ruby-comment">#In Famrivity user report page</span>
  <span class="ruby-comment">#get the free users list for provider</span>
  <span class="ruby-ivar">@prt_free</span> = <span class="ruby-constant">User</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-string">&quot;select distinct user_id from users where lower(user_type)='u' and lower(user_plan)='free' and account_active_status=true&quot;</span>).<span class="ruby-identifier">map</span>(&amp;<span class="ruby-value">:user_id</span>).<span class="ruby-identifier">uniq</span>
  <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@prt_free</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@prt_free</span><span class="ruby-operator">!=</span><span class="ruby-string">&quot;&quot;</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@prt_free</span>.<span class="ruby-identifier">present?</span>
    <span class="ruby-ivar">@prt_free_tot</span> = <span class="ruby-ivar">@prt_free</span>.<span class="ruby-identifier">length</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-ivar">@prt_free_tot</span> = <span class="ruby-value">0</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">return</span> <span class="ruby-ivar">@prt_free_tot</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- parent_free-source -->
          
        </div>

        

        
      </div><!-- parent_free-method -->

    
      <div id="method-i-parent_inactive" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">parent_inactive</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="parent_inactive-source">
            <pre><span class="ruby-comment"># File app/helpers/landing_helper.rb, line 364</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">parent_inactive</span> <span class="ruby-comment">#In Famrivity user report page</span>
  <span class="ruby-comment">#get the free users list for provider</span>
  <span class="ruby-ivar">@prt_inact</span> = <span class="ruby-constant">User</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-string">&quot;select distinct user_id from users where lower(user_type)='u' and account_active_status=false&quot;</span>).<span class="ruby-identifier">map</span>(&amp;<span class="ruby-value">:user_id</span>).<span class="ruby-identifier">uniq</span>
  <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@prt_inact</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@prt_inact</span><span class="ruby-operator">!=</span><span class="ruby-string">&quot;&quot;</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@prt_inact</span>.<span class="ruby-identifier">present?</span>
    <span class="ruby-ivar">@prt_inact_tot</span> = <span class="ruby-ivar">@prt_inact</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-ivar">@prt_inact_tot</span> = <span class="ruby-value">0</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">return</span> <span class="ruby-ivar">@prt_inact_tot</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- parent_inactive-source -->
          
        </div>

        

        
      </div><!-- parent_inactive-method -->

    
      <div id="method-i-parent_inactive_withdate" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">parent_inactive_withdate</span><span
            class="method-args">(sdate,edate)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="parent_inactive_withdate-source">
            <pre><span class="ruby-comment"># File app/helpers/landing_helper.rb, line 375</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">parent_inactive_withdate</span>(<span class="ruby-identifier">sdate</span>,<span class="ruby-identifier">edate</span>) <span class="ruby-comment">#In Famrivity user report page</span>
  <span class="ruby-comment">#get the free users list for provider</span>
  <span class="ruby-ivar">@prt_inact</span> = <span class="ruby-constant">User</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-node">&quot;select distinct user_id from users where lower(user_type)='u' and account_active_status=false and date(user_created_date) between date('#{sdate}') and date('#{edate}')&quot;</span>).<span class="ruby-identifier">map</span>(&amp;<span class="ruby-value">:user_id</span>).<span class="ruby-identifier">uniq</span>
  <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@prt_inact</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@prt_inact</span><span class="ruby-operator">!=</span><span class="ruby-string">&quot;&quot;</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@prt_inact</span>.<span class="ruby-identifier">present?</span>
    <span class="ruby-ivar">@prt_inact_tot</span> = <span class="ruby-ivar">@prt_inact</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-ivar">@prt_inact_tot</span> = <span class="ruby-value">0</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">return</span> <span class="ruby-ivar">@prt_inact_tot</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- parent_inactive_withdate-source -->
          
        </div>

        

        
      </div><!-- parent_inactive_withdate-method -->

    
      <div id="method-i-parent_iwave" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">parent_iwave</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="parent_iwave-source">
            <pre><span class="ruby-comment"># File app/helpers/landing_helper.rb, line 420</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">parent_iwave</span> <span class="ruby-comment">#In Famrivity user report page</span>
  <span class="ruby-comment">#get the free users list for provider  iwaves</span>
  <span class="ruby-ivar">@par_iw_usr</span> = <span class="ruby-constant">User</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-string">&quot;select distinct user_id from users where lower(user_type)='u' and account_active_status=true and email_address like '%@i-waves%'&quot;</span>).<span class="ruby-identifier">map</span>(&amp;<span class="ruby-value">:user_id</span>).<span class="ruby-identifier">uniq</span>
  <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@par_iw_usr</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@par_iw_usr</span><span class="ruby-operator">!=</span><span class="ruby-string">&quot;&quot;</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@par_iw_usr</span>.<span class="ruby-identifier">present?</span>
    <span class="ruby-ivar">@par_iw_usr_tot</span> = <span class="ruby-ivar">@par_iw_usr</span>.<span class="ruby-identifier">length</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-ivar">@par_iw_usr_tot</span> = <span class="ruby-value">0</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">return</span> <span class="ruby-ivar">@par_iw_usr_tot</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- parent_iwave-source -->
          
        </div>

        

        
      </div><!-- parent_iwave-method -->

    
      <div id="method-i-parent_percent_calc" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">parent_percent_calc</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="parent_percent_calc-source">
            <pre><span class="ruby-comment"># File app/helpers/landing_helper.rb, line 479</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">parent_percent_calc</span>
  <span class="ruby-ivar">@total_user</span> = <span class="ruby-constant">User</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-string">&quot;select distinct user_id from users where lower(user_type)='u' and account_active_status=true&quot;</span>).<span class="ruby-identifier">map</span>(&amp;<span class="ruby-value">:user_id</span>).<span class="ruby-identifier">uniq</span>
  <span class="ruby-ivar">@total_nonmember</span> = <span class="ruby-constant">ContactUser</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-string">&quot;select c.contact_email from contact_users c left join users u on c.user_id=u.user_id where lower(u.user_type)='u' and u.account_active_status=true and c.contact_email is not null and c.invite_status is true and c.profile_id is null and lower(c.contact_user_type) ='non_member'&quot;</span>).<span class="ruby-identifier">map</span>(&amp;<span class="ruby-value">:contact_email</span>).<span class="ruby-identifier">uniq</span>
  <span class="ruby-keyword">if</span> (<span class="ruby-operator">!</span><span class="ruby-ivar">@total_user</span>.<span class="ruby-identifier">blank?</span>) <span class="ruby-operator">||</span> (<span class="ruby-operator">!</span><span class="ruby-ivar">@total_nonmember</span>.<span class="ruby-identifier">blank?</span>)
    <span class="ruby-identifier">total_count</span> = <span class="ruby-ivar">@total_user</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">+</span> <span class="ruby-ivar">@total_nonmember</span>.<span class="ruby-identifier">length</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-ivar">@parent_per_total</span> = ((<span class="ruby-identifier">user_invited_by_parent</span>.<span class="ruby-identifier">to_f</span> <span class="ruby-operator">/</span> <span class="ruby-identifier">total_count</span>.<span class="ruby-identifier">to_f</span>).<span class="ruby-identifier">to_f</span>) * <span class="ruby-value">100</span>
  <span class="ruby-keyword">return</span> <span class="ruby-ivar">@parent_per_total</span>.<span class="ruby-identifier">to_f</span>.<span class="ruby-identifier">round</span>(<span class="ruby-value">2</span>)
<span class="ruby-keyword">end</span></pre>
          </div><!-- parent_percent_calc-source -->
          
        </div>

        

        
      </div><!-- parent_percent_calc-method -->

    
      <div id="method-i-parent_percent_calc_withdate" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">parent_percent_calc_withdate</span><span
            class="method-args">(sdate,edate)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="parent_percent_calc_withdate-source">
            <pre><span class="ruby-comment"># File app/helpers/landing_helper.rb, line 489</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">parent_percent_calc_withdate</span>(<span class="ruby-identifier">sdate</span>,<span class="ruby-identifier">edate</span>)
  <span class="ruby-ivar">@total_user</span> = <span class="ruby-constant">User</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-string">&quot;select distinct user_id from users where lower(user_type)='u' and account_active_status=true&quot;</span>).<span class="ruby-identifier">map</span>(&amp;<span class="ruby-value">:user_id</span>).<span class="ruby-identifier">uniq</span>
  <span class="ruby-ivar">@total_nonmember</span> = <span class="ruby-constant">ContactUser</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-string">&quot;select c.contact_email from contact_users c left join users u on c.user_id=u.user_id where lower(u.user_type)='u' and u.account_active_status=true and c.contact_email is not null and c.invite_status is true and c.profile_id is null and lower(c.contact_user_type) ='non_member'&quot;</span>).<span class="ruby-identifier">map</span>(&amp;<span class="ruby-value">:contact_email</span>).<span class="ruby-identifier">uniq</span>
  <span class="ruby-keyword">if</span> (<span class="ruby-operator">!</span><span class="ruby-ivar">@total_user</span>.<span class="ruby-identifier">blank?</span>) <span class="ruby-operator">||</span> (<span class="ruby-operator">!</span><span class="ruby-ivar">@total_nonmember</span>.<span class="ruby-identifier">blank?</span>)
    <span class="ruby-identifier">total_count</span> = <span class="ruby-ivar">@total_user</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">+</span> <span class="ruby-ivar">@total_nonmember</span>.<span class="ruby-identifier">length</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-ivar">@parent_per_total</span> = ((<span class="ruby-identifier">user_invited_by_parent_withdate</span>(<span class="ruby-identifier">sdate</span>,<span class="ruby-identifier">edate</span>).<span class="ruby-identifier">to_f</span> <span class="ruby-operator">/</span> <span class="ruby-identifier">total_count</span>.<span class="ruby-identifier">to_f</span>).<span class="ruby-identifier">to_f</span>) * <span class="ruby-value">100</span>
  <span class="ruby-keyword">return</span> <span class="ruby-ivar">@parent_per_total</span>.<span class="ruby-identifier">to_f</span>.<span class="ruby-identifier">round</span>(<span class="ruby-value">2</span>)
<span class="ruby-keyword">end</span></pre>
          </div><!-- parent_percent_calc_withdate-source -->
          
        </div>

        

        
      </div><!-- parent_percent_calc_withdate-method -->

    
      <div id="method-i-partner_added" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">partner_added</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="partner_added-source">
            <pre><span class="ruby-comment"># File app/helpers/landing_helper.rb, line 220</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">partner_added</span> <span class="ruby-comment">#In Famrivity user report page</span>
  <span class="ruby-comment">#get the  users list for curator</span>
  <span class="ruby-ivar">@curt_add</span> = <span class="ruby-constant">User</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-string">&quot;select distinct user_id from users where lower(user_type)='p' and lower(user_plan)='sell' and account_active_status=true and is_partner=true&quot;</span>).<span class="ruby-identifier">map</span>(&amp;<span class="ruby-value">:user_id</span>).<span class="ruby-identifier">uniq</span>
  <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@curt_add</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@curt_add</span><span class="ruby-operator">!=</span><span class="ruby-string">&quot;&quot;</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@curt_add</span>.<span class="ruby-identifier">present?</span>
    <span class="ruby-ivar">@curt_add_tot</span> = <span class="ruby-ivar">@curt_add</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-ivar">@curt_add_tot</span> = <span class="ruby-value">0</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">return</span> <span class="ruby-ivar">@curt_add_tot</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- partner_added-source -->
          
        </div>

        

        
      </div><!-- partner_added-method -->

    
      <div id="method-i-partner_added_withdate" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">partner_added_withdate</span><span
            class="method-args">(sdate,edate)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="partner_added_withdate-source">
            <pre><span class="ruby-comment"># File app/helpers/landing_helper.rb, line 231</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">partner_added_withdate</span>(<span class="ruby-identifier">sdate</span>,<span class="ruby-identifier">edate</span>) <span class="ruby-comment">#In Famrivity user report page</span>
  <span class="ruby-comment">#get the  users list for curator</span>
  <span class="ruby-ivar">@curt_add</span> = <span class="ruby-constant">User</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-node">&quot;select distinct user_id from users where lower(user_type)='p' and lower(user_plan)='sell' and is_partner=true and account_active_status=true and date(user_created_date) between date('#{sdate}') and date('#{edate}')&quot;</span>).<span class="ruby-identifier">map</span>(&amp;<span class="ruby-value">:user_id</span>).<span class="ruby-identifier">uniq</span>
  <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@curt_add</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@curt_add</span><span class="ruby-operator">!=</span><span class="ruby-string">&quot;&quot;</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@curt_add</span>.<span class="ruby-identifier">present?</span>
    <span class="ruby-ivar">@curt_add_tot</span> = <span class="ruby-ivar">@curt_add</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-ivar">@curt_add_tot</span> = <span class="ruby-value">0</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">return</span> <span class="ruby-ivar">@curt_add_tot</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- partner_added_withdate-source -->
          
        </div>

        

        
      </div><!-- partner_added_withdate-method -->

    
      <div id="method-i-pro_inactive" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">pro_inactive</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="pro_inactive-source">
            <pre><span class="ruby-comment"># File app/helpers/landing_helper.rb, line 331</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">pro_inactive</span> <span class="ruby-comment">#In Famrivity user report page</span>
  <span class="ruby-comment">#get the inactive users list for provider</span>
  <span class="ruby-ivar">@pro_inact</span> = <span class="ruby-constant">User</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-string">&quot;select distinct user_id from users where lower(user_type)='p' and account_active_status=false&quot;</span>).<span class="ruby-identifier">map</span>(&amp;<span class="ruby-value">:user_id</span>).<span class="ruby-identifier">uniq</span>
  <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@pro_inact</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@pro_inact</span><span class="ruby-operator">!=</span><span class="ruby-string">&quot;&quot;</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@pro_inact</span>.<span class="ruby-identifier">present?</span>
    <span class="ruby-ivar">@pro_inact_tot</span> = <span class="ruby-ivar">@pro_inact</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-ivar">@pro_inact_tot</span> = <span class="ruby-value">0</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">return</span> <span class="ruby-ivar">@pro_inact_tot</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- pro_inactive-source -->
          
        </div>

        

        
      </div><!-- pro_inactive-method -->

    
      <div id="method-i-pro_inactive_withdate" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">pro_inactive_withdate</span><span
            class="method-args">(sdate,edate)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="pro_inactive_withdate-source">
            <pre><span class="ruby-comment"># File app/helpers/landing_helper.rb, line 342</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">pro_inactive_withdate</span>(<span class="ruby-identifier">sdate</span>,<span class="ruby-identifier">edate</span>) <span class="ruby-comment">#In Famrivity user report page</span>
  <span class="ruby-comment">#get the inactive users list for provider</span>
  <span class="ruby-ivar">@pro_inact</span> = <span class="ruby-constant">User</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-node">&quot;select distinct user_id from users where lower(user_type)='p' and account_active_status=false and date(user_created_date) between date('#{sdate}') and date('#{edate}')&quot;</span>).<span class="ruby-identifier">map</span>(&amp;<span class="ruby-value">:user_id</span>).<span class="ruby-identifier">uniq</span>
  <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@pro_inact</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@pro_inact</span><span class="ruby-operator">!=</span><span class="ruby-string">&quot;&quot;</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@pro_inact</span>.<span class="ruby-identifier">present?</span>
    <span class="ruby-ivar">@pro_inact_tot</span> = <span class="ruby-ivar">@pro_inact</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-ivar">@pro_inact_tot</span> = <span class="ruby-value">0</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">return</span> <span class="ruby-ivar">@pro_inact_tot</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- pro_inactive_withdate-source -->
          
        </div>

        

        
      </div><!-- pro_inactive_withdate-method -->

    
      <div id="method-i-prouser_free" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">prouser_free</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="prouser_free-source">
            <pre><span class="ruby-comment"># File app/helpers/landing_helper.rb, line 275</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">prouser_free</span> <span class="ruby-comment">#In Famrivity user report page</span>
  <span class="ruby-comment">#get the free users list for provider</span>
  <span class="ruby-ivar">@free_usr</span> = <span class="ruby-constant">User</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-string">&quot;select distinct user_id from users where lower(user_type)='p' and lower(user_plan)='free' and account_active_status=true and is_partner=false&quot;</span>).<span class="ruby-identifier">map</span>(&amp;<span class="ruby-value">:user_id</span>).<span class="ruby-identifier">uniq</span>
  <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@free_usr</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@free_usr</span><span class="ruby-operator">!=</span><span class="ruby-string">&quot;&quot;</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@free_usr</span>.<span class="ruby-identifier">present?</span>
    <span class="ruby-ivar">@free_tot</span> = <span class="ruby-ivar">@free_usr</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-ivar">@free_tot</span> = <span class="ruby-value">0</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">return</span> <span class="ruby-ivar">@free_tot</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- prouser_free-source -->
          
        </div>

        

        
      </div><!-- prouser_free-method -->

    
      <div id="method-i-prouser_free_withdate" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">prouser_free_withdate</span><span
            class="method-args">(sdate,edate)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="prouser_free_withdate-source">
            <pre><span class="ruby-comment"># File app/helpers/landing_helper.rb, line 286</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">prouser_free_withdate</span>(<span class="ruby-identifier">sdate</span>,<span class="ruby-identifier">edate</span>) <span class="ruby-comment">#In Famrivity user report page</span>
  <span class="ruby-comment">#get the free users list for provider</span>
  <span class="ruby-ivar">@free_usr</span> = <span class="ruby-constant">User</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-node">&quot;select distinct user_id from users where lower(user_type)='p' and lower(user_plan)='free' and account_active_status=true and date(user_created_date) between date('#{sdate}') and date('#{edate}')&quot;</span>).<span class="ruby-identifier">map</span>(&amp;<span class="ruby-value">:user_id</span>).<span class="ruby-identifier">uniq</span>
  <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@free_usr</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@free_usr</span><span class="ruby-operator">!=</span><span class="ruby-string">&quot;&quot;</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@free_usr</span>.<span class="ruby-identifier">present?</span>
    <span class="ruby-ivar">@free_tot</span> = <span class="ruby-ivar">@free_usr</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-ivar">@free_tot</span> = <span class="ruby-value">0</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">return</span> <span class="ruby-ivar">@free_tot</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- prouser_free_withdate-source -->
          
        </div>

        

        
      </div><!-- prouser_free_withdate-method -->

    
      <div id="method-i-provider_buy_amount" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">provider_buy_amount</span><span
            class="method-args">(auid)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>provider transaction amount checked here for the user buy now button.</p>
          

          
          <div class="method-source-code" id="provider_buy_amount-source">
            <pre><span class="ruby-comment"># File app/helpers/landing_helper.rb, line 40</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">provider_buy_amount</span>(<span class="ruby-identifier">auid</span>)
  <span class="ruby-ivar">@tdy_dte</span> = <span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>.<span class="ruby-identifier">strftime</span>(<span class="ruby-string">&quot;%Y-%m-%d&quot;</span>)
  <span class="ruby-constant">ProviderTransaction</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-node">&quot;select * from provider_transactions where user_id='#{auid}' and (end_date &gt;= date('#{@tdy_dte}')) order by id desc limit 1&quot;</span>) <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">auid</span>.<span class="ruby-identifier">nil?</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- provider_buy_amount-source -->
          
        </div>

        

        
      </div><!-- provider_buy_amount-method -->

    
      <div id="method-i-provider_iwave" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">provider_iwave</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="provider_iwave-source">
            <pre><span class="ruby-comment"># File app/helpers/landing_helper.rb, line 409</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">provider_iwave</span> <span class="ruby-comment">#In Famrivity user report page</span>
  <span class="ruby-comment">#get the free users list for provider  iwaves</span>
  <span class="ruby-ivar">@pro_iw_usr</span> = <span class="ruby-constant">User</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-string">&quot;select distinct user_id from users where lower(user_type)='p' and account_active_status=true and email_address like '%@i-waves%'&quot;</span>).<span class="ruby-identifier">map</span>(&amp;<span class="ruby-value">:user_id</span>).<span class="ruby-identifier">uniq</span>
  <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@pro_iw_usr</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@pro_iw_usr</span><span class="ruby-operator">!=</span><span class="ruby-string">&quot;&quot;</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@pro_iw_usr</span>.<span class="ruby-identifier">present?</span>
    <span class="ruby-ivar">@pro_iw_usr_tot</span> = <span class="ruby-ivar">@pro_iw_usr</span>.<span class="ruby-identifier">length</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-ivar">@pro_iw_usr_tot</span> = <span class="ruby-value">0</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">return</span> <span class="ruby-ivar">@pro_iw_usr_tot</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- provider_iwave-source -->
          
        </div>

        

        
      </div><!-- provider_iwave-method -->

    
      <div id="method-i-provider_renew_limit" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">provider_renew_limit</span><span
            class="method-args">(auid)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="provider_renew_limit-source">
            <pre><span class="ruby-comment"># File app/helpers/landing_helper.rb, line 45</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">provider_renew_limit</span>(<span class="ruby-identifier">auid</span>)
  <span class="ruby-ivar">@tdy_dte</span> = <span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>.<span class="ruby-identifier">strftime</span>(<span class="ruby-string">&quot;%Y-%m-%d&quot;</span>)
  <span class="ruby-constant">ProviderTransaction</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-node">&quot;select * from provider_transactions where user_id=#{auid} and end_date &gt;= date('#{@tdy_dte}') order by id desc limit 1&quot;</span>)
<span class="ruby-keyword">end</span></pre>
          </div><!-- provider_renew_limit-source -->
          
        </div>

        

        
      </div><!-- provider_renew_limit-method -->

    
      <div id="method-i-provider_signup_amount" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">provider_signup_amount</span><span
            class="method-args">(auid)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>get the provider transaction information for buy now and getinfo button by
rajkumar</p>
          

          
          <div class="method-source-code" id="provider_signup_amount-source">
            <pre><span class="ruby-comment"># File app/helpers/landing_helper.rb, line 28</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">provider_signup_amount</span>(<span class="ruby-identifier">auid</span>)
  <span class="ruby-comment">#activity attend details limit checked for the monthly basis from the provider transaction table by Rajkumar 2014-1-24</span>
  <span class="ruby-ivar">@tdy_date</span> = <span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>.<span class="ruby-identifier">strftime</span>(<span class="ruby-string">&quot;%Y-%m-%d&quot;</span>)
  <span class="ruby-ivar">@p_tran</span> = <span class="ruby-constant">ProviderTransaction</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-node">&quot;select * from provider_transactions where user_id='#{auid}' and (end_date &gt;= date('#{@tdy_date}')) order by id desc limit 1&quot;</span>) <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">auid</span>.<span class="ruby-identifier">nil?</span>
  <span class="ruby-ivar">@start_date</span> = <span class="ruby-ivar">@p_tran</span>[<span class="ruby-value">0</span>].<span class="ruby-identifier">start_date</span>.<span class="ruby-identifier">strftime</span>(<span class="ruby-string">&quot;%Y-%m-%d&quot;</span>) <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@p_tran</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@p_tran</span>[<span class="ruby-value">0</span>].<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@p_tran</span>[<span class="ruby-value">0</span>].<span class="ruby-identifier">start_date</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@p_tran</span>[<span class="ruby-value">0</span>].<span class="ruby-identifier">start_date</span>.<span class="ruby-identifier">present?</span>
  <span class="ruby-ivar">@end_date</span> = <span class="ruby-ivar">@p_tran</span>[<span class="ruby-value">0</span>].<span class="ruby-identifier">grace_period_date</span>.<span class="ruby-identifier">strftime</span>(<span class="ruby-string">&quot;%Y-%m-%d&quot;</span>) <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@p_tran</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@p_tran</span>[<span class="ruby-value">0</span>].<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@p_tran</span>[<span class="ruby-value">0</span>].<span class="ruby-identifier">grace_period_date</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@p_tran</span>[<span class="ruby-value">0</span>].<span class="ruby-identifier">grace_period_date</span>.<span class="ruby-identifier">present?</span>
  <span class="ruby-ivar">@actattend</span> = <span class="ruby-constant">ActivityAttendDetail</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-node">&quot;select attend_id from activity_attend_details where activity_id in (select activity_id from activities where user_id=#{auid}) and (inserted_date between date('#{@start_date}') and date('#{@end_date}'))&quot;</span>) <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">auid</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@start_date</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@end_date</span>.<span class="ruby-identifier">nil?</span>
  <span class="ruby-ivar">@usr</span>=<span class="ruby-constant">User</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">auid</span>) <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">auid</span>.<span class="ruby-identifier">nil?</span>
  <span class="ruby-keyword">return</span> <span class="ruby-ivar">@usr</span>,<span class="ruby-ivar">@actattend</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- provider_signup_amount-source -->
          
        </div>

        

        
      </div><!-- provider_signup_amount-method -->

    
      <div id="method-i-selluser_list" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">selluser_list</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="selluser_list-source">
            <pre><span class="ruby-comment"># File app/helpers/landing_helper.rb, line 109</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">selluser_list</span> <span class="ruby-comment">#In Famrivity user report page</span>
  <span class="ruby-comment">#get the sell users list for provider</span>
  <span class="ruby-ivar">@sell_usr</span> = <span class="ruby-constant">User</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-string">&quot;select distinct user_id from users where lower(user_type)='p' and lower(user_plan)='sell' and account_active_status=true and lower(manage_plan) is null and is_partner=false&quot;</span>).<span class="ruby-identifier">map</span>(&amp;<span class="ruby-value">:user_id</span>).<span class="ruby-identifier">uniq</span>
  <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@sell_usr</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@sell_usr</span><span class="ruby-operator">!=</span><span class="ruby-string">&quot;&quot;</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@sell_usr</span>.<span class="ruby-identifier">present?</span>
    <span class="ruby-ivar">@sel_tot</span> = <span class="ruby-ivar">@sell_usr</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-ivar">@sel_tot</span> = <span class="ruby-value">0</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">return</span> <span class="ruby-ivar">@sel_tot</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- selluser_list-source -->
          
        </div>

        

        
      </div><!-- selluser_list-method -->

    
      <div id="method-i-selluser_list_withdate" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">selluser_list_withdate</span><span
            class="method-args">(sdate,edate)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="selluser_list_withdate-source">
            <pre><span class="ruby-comment"># File app/helpers/landing_helper.rb, line 120</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">selluser_list_withdate</span>(<span class="ruby-identifier">sdate</span>,<span class="ruby-identifier">edate</span>) <span class="ruby-comment">#In Famrivity user report page</span>
  <span class="ruby-comment">#get the sell users list for provider</span>
  <span class="ruby-ivar">@sell_usr</span> = <span class="ruby-constant">User</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-node">&quot;select distinct user_id from users where lower(user_type)='p' and lower(user_plan)='sell' and account_active_status=true and lower(manage_plan) is null and is_partner=false and date(user_created_date) between date('#{sdate}') and date('#{edate}')&quot;</span>).<span class="ruby-identifier">map</span>(&amp;<span class="ruby-value">:user_id</span>).<span class="ruby-identifier">uniq</span>
  <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@sell_usr</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@sell_usr</span><span class="ruby-operator">!=</span><span class="ruby-string">&quot;&quot;</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@sell_usr</span>.<span class="ruby-identifier">present?</span>
    <span class="ruby-ivar">@sel_tot</span> = <span class="ruby-ivar">@sell_usr</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-ivar">@sel_tot</span> = <span class="ruby-value">0</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">return</span> <span class="ruby-ivar">@sel_tot</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- selluser_list_withdate-source -->
          
        </div>

        

        
      </div><!-- selluser_list_withdate-method -->

    
      <div id="method-i-spon_pro_list" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">spon_pro_list</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="spon_pro_list-source">
            <pre><span class="ruby-comment"># File app/helpers/landing_helper.rb, line 242</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">spon_pro_list</span> <span class="ruby-comment">#In Famrivity user report page</span>
  <span class="ruby-comment">#get the sell users list for provider</span>
  <span class="ruby-ivar">@spon_usr</span> = <span class="ruby-constant">User</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-string">&quot;select distinct user_id from users where lower(user_type)='p' and lower(user_plan)='sponsor' and account_active_status=true and is_partner=false&quot;</span>).<span class="ruby-identifier">map</span>(&amp;<span class="ruby-value">:user_id</span>).<span class="ruby-identifier">uniq</span>
  <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@spon_usr</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@spon_usr</span><span class="ruby-operator">!=</span><span class="ruby-string">&quot;&quot;</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@spon_usr</span>.<span class="ruby-identifier">present?</span>
    <span class="ruby-ivar">@spon_usr_tot</span> = <span class="ruby-ivar">@spon_usr</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-ivar">@spon_usr_tot</span> = <span class="ruby-value">0</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">return</span> <span class="ruby-ivar">@spon_usr_tot</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- spon_pro_list-source -->
          
        </div>

        

        
      </div><!-- spon_pro_list-method -->

    
      <div id="method-i-spon_pro_list_withdate" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">spon_pro_list_withdate</span><span
            class="method-args">(sdate,edate)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="spon_pro_list_withdate-source">
            <pre><span class="ruby-comment"># File app/helpers/landing_helper.rb, line 253</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">spon_pro_list_withdate</span>(<span class="ruby-identifier">sdate</span>,<span class="ruby-identifier">edate</span>) <span class="ruby-comment">#In Famrivity user report page</span>
  <span class="ruby-comment">#get the sell users list for provider</span>
  <span class="ruby-ivar">@spon_usr</span> = <span class="ruby-constant">User</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-node">&quot;select distinct user_id from users where lower(user_type)='p' and lower(user_plan)='sponsor' and account_active_status=true and date(user_created_date) between date('#{sdate}') and date('#{edate}')&quot;</span>).<span class="ruby-identifier">map</span>(&amp;<span class="ruby-value">:user_id</span>).<span class="ruby-identifier">uniq</span>
  <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@spon_usr</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@spon_usr</span><span class="ruby-operator">!=</span><span class="ruby-string">&quot;&quot;</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@spon_usr</span>.<span class="ruby-identifier">present?</span>
    <span class="ruby-ivar">@spon_usr_tot</span> = <span class="ruby-ivar">@spon_usr</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-ivar">@spon_usr_tot</span> = <span class="ruby-value">0</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">return</span> <span class="ruby-ivar">@spon_usr_tot</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- spon_pro_list_withdate-source -->
          
        </div>

        

        
      </div><!-- spon_pro_list_withdate-method -->

    
      <div id="method-i-url_format" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">url_format</span><span
            class="method-args">(val,url)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>to form the url for seo search  city</p>
          

          
          <div class="method-source-code" id="url_format-source">
            <pre><span class="ruby-comment"># File app/helpers/landing_helper.rb, line 522</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">url_format</span>(<span class="ruby-identifier">val</span>,<span class="ruby-identifier">url</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">val</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">url</span>.<span class="ruby-identifier">nil?</span>
    <span class="ruby-identifier">test</span> = <span class="ruby-identifier">url</span>
    <span class="ruby-identifier">test_url</span> = (<span class="ruby-identifier">test</span>.<span class="ruby-identifier">concat</span>(<span class="ruby-string">&quot;/&quot;</span><span class="ruby-operator">+</span><span class="ruby-identifier">val</span>.<span class="ruby-identifier">downcase</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">/\s/</span>,<span class="ruby-string">'-'</span>).<span class="ruby-identifier">gsub</span>(<span class="ruby-string">','</span>,<span class="ruby-string">''</span>)));
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">test_url</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- url_format-source -->
          
        </div>

        

        
      </div><!-- url_format-method -->

    
      <div id="method-i-url_format_city" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">url_format_city</span><span
            class="method-args">(val,url)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>to form the url for seo search  city</p>
          

          
          <div class="method-source-code" id="url_format_city-source">
            <pre><span class="ruby-comment"># File app/helpers/landing_helper.rb, line 547</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">url_format_city</span>(<span class="ruby-identifier">val</span>,<span class="ruby-identifier">url</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">val</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">url</span>.<span class="ruby-identifier">nil?</span>
    <span class="ruby-identifier">test</span> = <span class="ruby-identifier">url</span>
    <span class="ruby-comment">#~ @state = State.find_by_state_id(1)</span>
    <span class="ruby-comment">#~ if @state &amp;&amp; @state!=&quot;&quot; &amp;&amp; @state.state_name == &quot;California&quot;</span>
    <span class="ruby-identifier">state</span> = <span class="ruby-string">&quot;-ca&quot;</span> <span class="ruby-comment">#get the states values</span>
    <span class="ruby-comment">#~ end</span>
    <span class="ruby-identifier">test_url</span> = (<span class="ruby-identifier">val</span>.<span class="ruby-identifier">downcase</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">/\s/</span>,<span class="ruby-string">'-'</span>)<span class="ruby-operator">+</span><span class="ruby-identifier">state</span>)
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">test_url</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- url_format_city-source -->
          
        </div>

        

        
      </div><!-- url_format_city-method -->

    
      <div id="method-i-url_format_city_cate" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">url_format_city_cate</span><span
            class="method-args">(val,url)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>to form the url for seo search  city</p>
          

          
          <div class="method-source-code" id="url_format_city_cate-source">
            <pre><span class="ruby-comment"># File app/helpers/landing_helper.rb, line 560</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">url_format_city_cate</span>(<span class="ruby-identifier">val</span>,<span class="ruby-identifier">url</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">val</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">url</span>.<span class="ruby-identifier">nil?</span>
    <span class="ruby-comment">#~ test = url</span>
    <span class="ruby-identifier">test_url</span> = <span class="ruby-identifier">url</span>
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">test_url</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- url_format_city_cate-source -->
          
        </div>

        

        
      </div><!-- url_format_city_cate-method -->

    
      <div id="method-i-url_format_slug" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">url_format_slug</span><span
            class="method-args">(city,val)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="url_format_slug-source">
            <pre><span class="ruby-comment"># File app/helpers/landing_helper.rb, line 530</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">url_format_slug</span>(<span class="ruby-identifier">city</span>,<span class="ruby-identifier">val</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">city</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">val</span>.<span class="ruby-identifier">nil?</span>
    <span class="ruby-comment">#test = city </span>
    <span class="ruby-identifier">state</span> = <span class="ruby-identifier">check_for_state_value</span>(<span class="ruby-identifier">city</span>) <span class="ruby-comment">#get the states values</span>
    <span class="ruby-identifier">test_url</span> = (<span class="ruby-string">&quot;/&quot;</span><span class="ruby-operator">+</span><span class="ruby-identifier">city</span>.<span class="ruby-identifier">downcase</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">/\s/</span>,<span class="ruby-string">'-'</span>)<span class="ruby-operator">+</span><span class="ruby-identifier">state</span><span class="ruby-operator">+</span><span class="ruby-string">&quot;/&quot;</span><span class="ruby-operator">+</span><span class="ruby-identifier">val</span>.<span class="ruby-identifier">downcase</span>)
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">test_url</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- url_format_slug-source -->
          
        </div>

        

        
      </div><!-- url_format_slug-method -->

    
      <div id="method-i-url_format_subcat_slug" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">url_format_subcat_slug</span><span
            class="method-args">(city,cat_name,val)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="url_format_subcat_slug-source">
            <pre><span class="ruby-comment"># File app/helpers/landing_helper.rb, line 539</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">url_format_subcat_slug</span>(<span class="ruby-identifier">city</span>,<span class="ruby-identifier">cat_name</span>,<span class="ruby-identifier">val</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">city</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">cat_name</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">val</span>.<span class="ruby-identifier">nil?</span>
    <span class="ruby-identifier">state</span> = <span class="ruby-identifier">check_for_state_value</span>(<span class="ruby-identifier">city</span>)<span class="ruby-comment">#get the states values</span>
    <span class="ruby-identifier">subcategory_url</span> = (<span class="ruby-string">&quot;/&quot;</span><span class="ruby-operator">+</span><span class="ruby-identifier">city</span>.<span class="ruby-identifier">downcase</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">/\s/</span>,<span class="ruby-string">'-'</span>)<span class="ruby-operator">+</span><span class="ruby-identifier">state</span><span class="ruby-operator">+</span><span class="ruby-string">&quot;/&quot;</span><span class="ruby-operator">+</span><span class="ruby-identifier">cat_name</span>.<span class="ruby-identifier">downcase</span><span class="ruby-operator">+</span><span class="ruby-string">&quot;/&quot;</span><span class="ruby-operator">+</span><span class="ruby-identifier">val</span>.<span class="ruby-identifier">downcase</span>)
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">subcategory_url</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- url_format_subcat_slug-source -->
          
        </div>

        

        
      </div><!-- url_format_subcat_slug-method -->

    
      <div id="method-i-user_invited_by_all" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">user_invited_by_all</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="user_invited_by_all-source">
            <pre><span class="ruby-comment"># File app/helpers/landing_helper.rb, line 431</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">user_invited_by_all</span> <span class="ruby-comment">#In Famrivity general report page</span>
  <span class="ruby-comment">#get the users invited by all</span>
  <span class="ruby-ivar">@user_invited</span> = <span class="ruby-constant">ContactUser</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-string">&quot;select c.contact_email from contact_users c left join users u on c.user_id=u.user_id where u.account_active_status=true and c.contact_email is not null and c.invite_status is true and c.profile_id is null&quot;</span>).<span class="ruby-identifier">map</span>(&amp;<span class="ruby-value">:contact_email</span>).<span class="ruby-identifier">uniq</span>
  <span class="ruby-ivar">@user_invited_fb</span> = <span class="ruby-constant">ContactUser</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-string">&quot;select c.contact_email,c.profile_id from contact_users c left join users u on c.user_id=u.user_id where u.account_active_status=true and c.profile_id is not null and c.invite_status is true and c.contact_type='facebook'&quot;</span>).<span class="ruby-identifier">map</span>(&amp;<span class="ruby-value">:profile_id</span>).<span class="ruby-identifier">uniq</span>
  <span class="ruby-keyword">if</span> (<span class="ruby-operator">!</span><span class="ruby-ivar">@user_invited</span>.<span class="ruby-identifier">blank?</span>) <span class="ruby-operator">||</span> (<span class="ruby-operator">!</span><span class="ruby-ivar">@user_invited_fb</span>.<span class="ruby-identifier">blank?</span>)
    <span class="ruby-ivar">@user_tot</span> = <span class="ruby-ivar">@user_invited</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">+</span> <span class="ruby-ivar">@user_invited_fb</span>.<span class="ruby-identifier">length</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-ivar">@user_tot</span> = <span class="ruby-value">0</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">return</span> <span class="ruby-ivar">@user_tot</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- user_invited_by_all-source -->
          
        </div>

        

        
      </div><!-- user_invited_by_all-method -->

    
      <div id="method-i-user_invited_by_all_withdate" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">user_invited_by_all_withdate</span><span
            class="method-args">(sdate,edate)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="user_invited_by_all_withdate-source">
            <pre><span class="ruby-comment"># File app/helpers/landing_helper.rb, line 443</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">user_invited_by_all_withdate</span>(<span class="ruby-identifier">sdate</span>,<span class="ruby-identifier">edate</span>)
  <span class="ruby-comment">#get the users invited by all</span>
  <span class="ruby-ivar">@u_invited</span> = <span class="ruby-constant">ContactUser</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-node">&quot;select c.contact_email from contact_users c left join users u on c.user_id=u.user_id where u.account_active_status=true and c.contact_email is not null and c.invite_status is true and c.profile_id is null and date(modified_date) between date('#{sdate}') and date('#{edate}')&quot;</span>).<span class="ruby-identifier">map</span>(&amp;<span class="ruby-value">:contact_email</span>).<span class="ruby-identifier">uniq</span>
  <span class="ruby-ivar">@u_invited_fb</span> = <span class="ruby-constant">ContactUser</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-node">&quot;select c.contact_email,c.profile_id from contact_users c left join users u on c.user_id=u.user_id where u.account_active_status=true and c.profile_id is not null and c.invite_status is true and c.contact_type='facebook' and date(modified_date) between date('#{sdate}') and date('#{edate}')&quot;</span>).<span class="ruby-identifier">map</span>(&amp;<span class="ruby-value">:profile_id</span>).<span class="ruby-identifier">uniq</span>
  <span class="ruby-keyword">if</span> (<span class="ruby-operator">!</span><span class="ruby-ivar">@u_invited</span>.<span class="ruby-identifier">blank?</span>) <span class="ruby-operator">||</span> (<span class="ruby-operator">!</span><span class="ruby-ivar">@u_invited_fb</span>.<span class="ruby-identifier">blank?</span>)
    <span class="ruby-ivar">@user_tot</span> = <span class="ruby-ivar">@u_invited</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">+</span> <span class="ruby-ivar">@u_invited_fb</span>.<span class="ruby-identifier">length</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-ivar">@user_tot</span> = <span class="ruby-value">0</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">return</span> <span class="ruby-ivar">@user_tot</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- user_invited_by_all_withdate-source -->
          
        </div>

        

        
      </div><!-- user_invited_by_all_withdate-method -->

    
      <div id="method-i-user_invited_by_parent" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">user_invited_by_parent</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="user_invited_by_parent-source">
            <pre><span class="ruby-comment"># File app/helpers/landing_helper.rb, line 455</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">user_invited_by_parent</span> <span class="ruby-comment">#In Famrivity general report page</span>
  <span class="ruby-comment">#get the users invited by all</span>
  <span class="ruby-ivar">@parent_invited</span> = <span class="ruby-constant">ContactUser</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-string">&quot;select c.contact_email from contact_users c left join users u on c.user_id=u.user_id where lower(u.user_type)='u' and u.account_active_status=true and c.contact_email is not null and c.invite_status is true and c.profile_id is null&quot;</span>).<span class="ruby-identifier">map</span>(&amp;<span class="ruby-value">:contact_email</span>).<span class="ruby-identifier">uniq</span>
  <span class="ruby-ivar">@parent_invited_fb</span> = <span class="ruby-constant">ContactUser</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-string">&quot;select c.contact_email,c.profile_id from contact_users c left join users u on c.user_id=u.user_id where lower(u.user_type)='u' and u.account_active_status=true and c.profile_id is not null and c.invite_status is true and c.contact_type='facebook'&quot;</span>).<span class="ruby-identifier">map</span>(&amp;<span class="ruby-value">:profile_id</span>).<span class="ruby-identifier">uniq</span>
  <span class="ruby-keyword">if</span> (<span class="ruby-operator">!</span><span class="ruby-ivar">@parent_invited</span>.<span class="ruby-identifier">blank?</span>) <span class="ruby-operator">||</span> (<span class="ruby-operator">!</span><span class="ruby-ivar">@parent_invited_fb</span>.<span class="ruby-identifier">blank?</span>)
    <span class="ruby-ivar">@parent_tot</span> = <span class="ruby-ivar">@parent_invited</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">+</span> <span class="ruby-ivar">@parent_invited_fb</span>.<span class="ruby-identifier">length</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-ivar">@parent_tot</span> = <span class="ruby-value">0</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">return</span> <span class="ruby-ivar">@parent_tot</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- user_invited_by_parent-source -->
          
        </div>

        

        
      </div><!-- user_invited_by_parent-method -->

    
      <div id="method-i-user_invited_by_parent_withdate" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">user_invited_by_parent_withdate</span><span
            class="method-args">(sdate,edate)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="user_invited_by_parent_withdate-source">
            <pre><span class="ruby-comment"># File app/helpers/landing_helper.rb, line 467</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">user_invited_by_parent_withdate</span>(<span class="ruby-identifier">sdate</span>,<span class="ruby-identifier">edate</span>)
  <span class="ruby-comment">#get the users invited by all</span>
  <span class="ruby-ivar">@p_invited</span> = <span class="ruby-constant">ContactUser</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-node">&quot;select c.contact_email from contact_users c left join users u on c.user_id=u.user_id where lower(u.user_type)='u' and u.account_active_status=true and c.contact_email is not null and c.invite_status is true and c.profile_id is null and date(modified_date) between date('#{sdate}') and date('#{edate}')&quot;</span>).<span class="ruby-identifier">map</span>(&amp;<span class="ruby-value">:contact_email</span>).<span class="ruby-identifier">uniq</span>
  <span class="ruby-ivar">@p_invited_fb</span> = <span class="ruby-constant">ContactUser</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-node">&quot;select c.contact_email,c.profile_id from contact_users c left join users u on c.user_id=u.user_id where lower(u.user_type)='u' and u.account_active_status=true and c.profile_id is not null and c.invite_status is true and c.contact_type='facebook' and date(modified_date) between date('#{sdate}') and date('#{edate}')&quot;</span>).<span class="ruby-identifier">map</span>(&amp;<span class="ruby-value">:profile_id</span>).<span class="ruby-identifier">uniq</span>
  <span class="ruby-keyword">if</span> (<span class="ruby-operator">!</span><span class="ruby-ivar">@p_invited</span>.<span class="ruby-identifier">blank?</span>) <span class="ruby-operator">||</span> (<span class="ruby-operator">!</span><span class="ruby-ivar">@p_invited_fb</span>.<span class="ruby-identifier">blank?</span>)
    <span class="ruby-ivar">@user_tot</span> = <span class="ruby-ivar">@p_invited</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">+</span> <span class="ruby-ivar">@p_invited_fb</span>.<span class="ruby-identifier">length</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-ivar">@user_tot</span> = <span class="ruby-value">0</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">return</span> <span class="ruby-ivar">@user_tot</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- user_invited_by_parent_withdate-source -->
          
        </div>

        

        
      </div><!-- user_invited_by_parent_withdate-method -->

    
      <div id="method-i-user_percent_calc" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">user_percent_calc</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="user_percent_calc-source">
            <pre><span class="ruby-comment"># File app/helpers/landing_helper.rb, line 499</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">user_percent_calc</span>
  <span class="ruby-ivar">@total_user</span> = <span class="ruby-constant">User</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-string">&quot;select distinct user_id from users where account_active_status=true&quot;</span>).<span class="ruby-identifier">map</span>(&amp;<span class="ruby-value">:user_id</span>).<span class="ruby-identifier">uniq</span>
  <span class="ruby-ivar">@total_nonmember</span> = <span class="ruby-constant">ContactUser</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-string">&quot;select c.contact_email from contact_users c left join users u on c.user_id=u.user_id where u.account_active_status=true and c.contact_email is not null and c.invite_status is true and c.profile_id is null and lower(c.contact_user_type) ='non_member'&quot;</span>).<span class="ruby-identifier">map</span>(&amp;<span class="ruby-value">:contact_email</span>).<span class="ruby-identifier">uniq</span>
  <span class="ruby-keyword">if</span> (<span class="ruby-operator">!</span><span class="ruby-ivar">@total_user</span>.<span class="ruby-identifier">blank?</span>) <span class="ruby-operator">||</span> (<span class="ruby-operator">!</span><span class="ruby-ivar">@total_nonmember</span>.<span class="ruby-identifier">blank?</span>)
    <span class="ruby-identifier">total_count</span> = <span class="ruby-ivar">@total_user</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">+</span> <span class="ruby-ivar">@total_nonmember</span>.<span class="ruby-identifier">length</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-ivar">@user_per_total</span> = ((<span class="ruby-identifier">user_invited_by_all</span>.<span class="ruby-identifier">to_f</span> <span class="ruby-operator">/</span> <span class="ruby-identifier">total_count</span>.<span class="ruby-identifier">to_f</span>).<span class="ruby-identifier">to_f</span>) * <span class="ruby-value">100</span>
  <span class="ruby-keyword">return</span> <span class="ruby-ivar">@user_per_total</span>.<span class="ruby-identifier">to_f</span>.<span class="ruby-identifier">round</span>(<span class="ruby-value">2</span>)
<span class="ruby-keyword">end</span></pre>
          </div><!-- user_percent_calc-source -->
          
        </div>

        

        
      </div><!-- user_percent_calc-method -->

    
      <div id="method-i-user_percent_calc_withdate" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">user_percent_calc_withdate</span><span
            class="method-args">(sdate,edate)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="user_percent_calc_withdate-source">
            <pre><span class="ruby-comment"># File app/helpers/landing_helper.rb, line 509</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">user_percent_calc_withdate</span>(<span class="ruby-identifier">sdate</span>,<span class="ruby-identifier">edate</span>)
  <span class="ruby-ivar">@total_user</span> = <span class="ruby-constant">User</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-string">&quot;select distinct user_id from users where account_active_status=true&quot;</span>).<span class="ruby-identifier">map</span>(&amp;<span class="ruby-value">:user_id</span>).<span class="ruby-identifier">uniq</span>
  <span class="ruby-comment">#~ total_count = @total_user.blank? ? 0 : @total_user.length</span>
  <span class="ruby-ivar">@total_nonmember</span> = <span class="ruby-constant">ContactUser</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-string">&quot;select c.contact_email from contact_users c left join users u on c.user_id=u.user_id where u.account_active_status=true and c.contact_email is not null and c.invite_status is true and c.profile_id is null and lower(c.contact_user_type) ='non_member'&quot;</span>).<span class="ruby-identifier">map</span>(&amp;<span class="ruby-value">:contact_email</span>).<span class="ruby-identifier">uniq</span>
  <span class="ruby-keyword">if</span> (<span class="ruby-operator">!</span><span class="ruby-ivar">@total_user</span>.<span class="ruby-identifier">blank?</span>) <span class="ruby-operator">||</span> (<span class="ruby-operator">!</span><span class="ruby-ivar">@total_nonmember</span>.<span class="ruby-identifier">blank?</span>)
    <span class="ruby-identifier">total_count</span> = <span class="ruby-ivar">@total_user</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">+</span> <span class="ruby-ivar">@total_nonmember</span>.<span class="ruby-identifier">length</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-ivar">@user_per_total</span> = ((<span class="ruby-identifier">user_invited_by_all_withdate</span>(<span class="ruby-identifier">sdate</span>,<span class="ruby-identifier">edate</span>).<span class="ruby-identifier">to_f</span> <span class="ruby-operator">/</span> <span class="ruby-identifier">total_count</span>.<span class="ruby-identifier">to_f</span>).<span class="ruby-identifier">to_f</span>) * <span class="ruby-value">100</span>
  <span class="ruby-keyword">return</span> <span class="ruby-ivar">@user_per_total</span>.<span class="ruby-identifier">to_f</span>.<span class="ruby-identifier">round</span>(<span class="ruby-value">2</span>)
<span class="ruby-keyword">end</span></pre>
          </div><!-- user_percent_calc_withdate-source -->
          
        </div>

        

        
      </div><!-- user_percent_calc_withdate-method -->

    
    </section><!-- public-instance-method-details -->
  
  </section><!-- 5Buntitled-5D -->

</div><!-- documentation -->


<footer id="validator-badges">
  <p><a href="http://validator.w3.org/check/referer">[Validate]</a>
  <p>Generated by <a href="https://github.com/rdoc/rdoc">RDoc</a> 3.12.2.
  <p>Generated with the <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish Rdoc Generator</a> 3.
</footer>

